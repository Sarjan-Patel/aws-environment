"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai/explain/route";
exports.ids = ["app/api/ai/explain/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fexplain%2Froute&page=%2Fapi%2Fai%2Fexplain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fexplain%2Froute.ts&appDir=%2FUsers%2Fsarjanpatel%2FGithub%20Repositories%2Faws-environment%2Fagentic-ai-platform%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsarjanpatel%2FGithub%20Repositories%2Faws-environment%2Fagentic-ai-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fexplain%2Froute&page=%2Fapi%2Fai%2Fexplain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fexplain%2Froute.ts&appDir=%2FUsers%2Fsarjanpatel%2FGithub%20Repositories%2Faws-environment%2Fagentic-ai-platform%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsarjanpatel%2FGithub%20Repositories%2Faws-environment%2Fagentic-ai-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sarjanpatel_Github_Repositories_aws_environment_agentic_ai_platform_app_api_ai_explain_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ai/explain/route.ts */ \"(rsc)/./app/api/ai/explain/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai/explain/route\",\n        pathname: \"/api/ai/explain\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai/explain/route\"\n    },\n    resolvedPagePath: \"/Users/sarjanpatel/Github Repositories/aws-environment/agentic-ai-platform/app/api/ai/explain/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sarjanpatel_Github_Repositories_aws_environment_agentic_ai_platform_app_api_ai_explain_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ai/explain/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaSUyRmV4cGxhaW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFpJTJGZXhwbGFpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFpJTJGZXhwbGFpbiUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNhcmphbnBhdGVsJTJGR2l0aHViJTIwUmVwb3NpdG9yaWVzJTJGYXdzLWVudmlyb25tZW50JTJGYWdlbnRpYy1haS1wbGF0Zm9ybSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzYXJqYW5wYXRlbCUyRkdpdGh1YiUyMFJlcG9zaXRvcmllcyUyRmF3cy1lbnZpcm9ubWVudCUyRmFnZW50aWMtYWktcGxhdGZvcm0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3NEO0FBQ25JO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWdlbnRpYy1haS1wbGF0Zm9ybS8/NTVhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2FyamFucGF0ZWwvR2l0aHViIFJlcG9zaXRvcmllcy9hd3MtZW52aXJvbm1lbnQvYWdlbnRpYy1haS1wbGF0Zm9ybS9hcHAvYXBpL2FpL2V4cGxhaW4vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpL2V4cGxhaW4vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9haS9leHBsYWluXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9haS9leHBsYWluL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NhcmphbnBhdGVsL0dpdGh1YiBSZXBvc2l0b3JpZXMvYXdzLWVudmlyb25tZW50L2FnZW50aWMtYWktcGxhdGZvcm0vYXBwL2FwaS9haS9leHBsYWluL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9haS9leHBsYWluL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fexplain%2Froute&page=%2Fapi%2Fai%2Fexplain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fexplain%2Froute.ts&appDir=%2FUsers%2Fsarjanpatel%2FGithub%20Repositories%2Faws-environment%2Fagentic-ai-platform%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsarjanpatel%2FGithub%20Repositories%2Faws-environment%2Fagentic-ai-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ai/explain/route.ts":
/*!*************************************!*\
  !*** ./app/api/ai/explain/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_ai_explain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ai/explain */ \"(rsc)/./lib/ai/explain.ts\");\n/* harmony import */ var _lib_ai_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/ai/client */ \"(rsc)/./lib/ai/client.ts\");\n\n\n\n/**\n * POST /api/ai/explain\n *\n * Generate AI explanations for various contexts:\n * - recommendation: Explain a single recommendation (text)\n * - recommendation-structured: Explain with structured JSON breakdown\n * - dashboard: Generate dashboard-level insights\n * - bulk: Summarize bulk action results\n * - batch: Generate explanations for multiple recommendations\n */ async function POST(request) {\n    try {\n        // Check if OpenAI is configured\n        if (!(0,_lib_ai_client__WEBPACK_IMPORTED_MODULE_2__.isOpenAIConfigured)()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"OpenAI API key not configured. Add OPENAI_API_KEY to .env.local\"\n            }, {\n                status: 503\n            });\n        }\n        const body = await request.json();\n        const { type, data } = body;\n        if (!type || !data) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Missing type or data in request body\"\n            }, {\n                status: 400\n            });\n        }\n        let result;\n        switch(type){\n            case \"recommendation\":\n                {\n                    const input = data;\n                    if (!input.resourceName || !input.scenarioId) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: false,\n                            error: \"Missing required fields for recommendation explanation\"\n                        }, {\n                            status: 400\n                        });\n                    }\n                    result = await (0,_lib_ai_explain__WEBPACK_IMPORTED_MODULE_1__.explainRecommendation)(input);\n                    break;\n                }\n            case \"recommendation-structured\":\n                {\n                    const input = data;\n                    if (!input.resourceName || !input.scenarioId) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: false,\n                            error: \"Missing required fields for structured recommendation explanation\"\n                        }, {\n                            status: 400\n                        });\n                    }\n                    result = await (0,_lib_ai_explain__WEBPACK_IMPORTED_MODULE_1__.explainRecommendationStructured)(input);\n                    // Return structured data if available\n                    if (result.success && result.structured) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: true,\n                            data: {\n                                explanation: result.explanation,\n                                structured: result.structured,\n                                cached: result.cached || false,\n                                model: result.model,\n                                tokensUsed: result.tokensUsed\n                            }\n                        });\n                    }\n                    break;\n                }\n            case \"dashboard\":\n                {\n                    const input = data;\n                    if (input.totalResources === undefined || input.totalDetections === undefined) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: false,\n                            error: \"Missing required fields for dashboard insight\"\n                        }, {\n                            status: 400\n                        });\n                    }\n                    result = await (0,_lib_ai_explain__WEBPACK_IMPORTED_MODULE_1__.generateDashboardInsight)(input);\n                    break;\n                }\n            case \"bulk\":\n                {\n                    const input = data;\n                    if (input.executedCount === undefined || !input.actions) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: false,\n                            error: \"Missing required fields for bulk action summary\"\n                        }, {\n                            status: 400\n                        });\n                    }\n                    result = await (0,_lib_ai_explain__WEBPACK_IMPORTED_MODULE_1__.summarizeBulkActions)(input);\n                    break;\n                }\n            case \"batch\":\n                {\n                    const inputs = data;\n                    if (!Array.isArray(inputs) || inputs.length === 0) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: false,\n                            error: \"Data must be a non-empty array for batch explanations\"\n                        }, {\n                            status: 400\n                        });\n                    }\n                    if (inputs.length > 10) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: false,\n                            error: \"Maximum 10 recommendations per batch request\"\n                        }, {\n                            status: 400\n                        });\n                    }\n                    const results = await (0,_lib_ai_explain__WEBPACK_IMPORTED_MODULE_1__.explainRecommendationsBatch)(inputs);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        data: results\n                    });\n                }\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: `Unknown type: ${type}. Valid types: recommendation, recommendation-structured, dashboard, bulk, batch`\n                }, {\n                    status: 400\n                });\n        }\n        if (!result.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: result.error\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                explanation: result.explanation,\n                cached: result.cached || false,\n                model: result.model,\n                tokensUsed: result.tokensUsed\n            }\n        });\n    } catch (error) {\n        console.error(\"[API] /api/ai/explain error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * GET /api/ai/explain\n *\n * Check AI service status\n */ async function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        data: {\n            configured: (0,_lib_ai_client__WEBPACK_IMPORTED_MODULE_2__.isOpenAIConfigured)(),\n            message: (0,_lib_ai_client__WEBPACK_IMPORTED_MODULE_2__.isOpenAIConfigured)() ? \"OpenAI API is configured and ready\" : \"OpenAI API key not configured. Add OPENAI_API_KEY to .env.local\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN0QjtZQUNFQyxTQUFTO1lBQ1RDLE9BQU9BLGlCQUFpQnlCLFFBQVF6QixNQUFNMEIsT0FBTyxHQUFHO1FBQ2xELEdBQ0E7WUFBRXpCLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWUwQjtJQUNwQixPQUFPdEMscURBQVlBLENBQUNTLElBQUksQ0FBQztRQUN2QkMsU0FBUztRQUNUSyxNQUFNO1lBQ0p3QixZQUFZakMsa0VBQWtCQTtZQUM5QitCLFNBQVMvQixrRUFBa0JBLEtBQ3ZCLHVDQUNBO1FBQ047SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWdlbnRpYy1haS1wbGF0Zm9ybS8uL2FwcC9hcGkvYWkvZXhwbGFpbi9yb3V0ZS50cz9kOGUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IHtcbiAgZXhwbGFpblJlY29tbWVuZGF0aW9uLFxuICBleHBsYWluUmVjb21tZW5kYXRpb25TdHJ1Y3R1cmVkLFxuICBnZW5lcmF0ZURhc2hib2FyZEluc2lnaHQsXG4gIHN1bW1hcml6ZUJ1bGtBY3Rpb25zLFxuICBleHBsYWluUmVjb21tZW5kYXRpb25zQmF0Y2gsXG4gIFJlY29tbWVuZGF0aW9uRXhwbGFuYXRpb25JbnB1dCxcbiAgRGFzaGJvYXJkSW5zaWdodElucHV0LFxuICBCdWxrQWN0aW9uU3VtbWFyeUlucHV0LFxufSBmcm9tIFwiQC9saWIvYWkvZXhwbGFpblwiXG5pbXBvcnQgeyBpc09wZW5BSUNvbmZpZ3VyZWQgfSBmcm9tIFwiQC9saWIvYWkvY2xpZW50XCJcblxuLyoqXG4gKiBQT1NUIC9hcGkvYWkvZXhwbGFpblxuICpcbiAqIEdlbmVyYXRlIEFJIGV4cGxhbmF0aW9ucyBmb3IgdmFyaW91cyBjb250ZXh0czpcbiAqIC0gcmVjb21tZW5kYXRpb246IEV4cGxhaW4gYSBzaW5nbGUgcmVjb21tZW5kYXRpb24gKHRleHQpXG4gKiAtIHJlY29tbWVuZGF0aW9uLXN0cnVjdHVyZWQ6IEV4cGxhaW4gd2l0aCBzdHJ1Y3R1cmVkIEpTT04gYnJlYWtkb3duXG4gKiAtIGRhc2hib2FyZDogR2VuZXJhdGUgZGFzaGJvYXJkLWxldmVsIGluc2lnaHRzXG4gKiAtIGJ1bGs6IFN1bW1hcml6ZSBidWxrIGFjdGlvbiByZXN1bHRzXG4gKiAtIGJhdGNoOiBHZW5lcmF0ZSBleHBsYW5hdGlvbnMgZm9yIG11bHRpcGxlIHJlY29tbWVuZGF0aW9uc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIE9wZW5BSSBpcyBjb25maWd1cmVkXG4gICAgaWYgKCFpc09wZW5BSUNvbmZpZ3VyZWQoKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IFwiT3BlbkFJIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQuIEFkZCBPUEVOQUlfQVBJX0tFWSB0byAuZW52LmxvY2FsXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDMgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgdHlwZSwgZGF0YSB9ID0gYm9keVxuXG4gICAgaWYgKCF0eXBlIHx8ICFkYXRhKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk1pc3NpbmcgdHlwZSBvciBkYXRhIGluIHJlcXVlc3QgYm9keVwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGxldCByZXN1bHRcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBcInJlY29tbWVuZGF0aW9uXCI6IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkYXRhIGFzIFJlY29tbWVuZGF0aW9uRXhwbGFuYXRpb25JbnB1dFxuICAgICAgICBpZiAoIWlucHV0LnJlc291cmNlTmFtZSB8fCAhaW5wdXQuc2NlbmFyaW9JZCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzIGZvciByZWNvbW1lbmRhdGlvbiBleHBsYW5hdGlvblwiIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgZXhwbGFpblJlY29tbWVuZGF0aW9uKGlucHV0KVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVjb21tZW5kYXRpb24tc3RydWN0dXJlZFwiOiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZGF0YSBhcyBSZWNvbW1lbmRhdGlvbkV4cGxhbmF0aW9uSW5wdXRcbiAgICAgICAgaWYgKCFpbnB1dC5yZXNvdXJjZU5hbWUgfHwgIWlucHV0LnNjZW5hcmlvSWQpIHtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcyBmb3Igc3RydWN0dXJlZCByZWNvbW1lbmRhdGlvbiBleHBsYW5hdGlvblwiIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgZXhwbGFpblJlY29tbWVuZGF0aW9uU3RydWN0dXJlZChpbnB1dClcbiAgICAgICAgLy8gUmV0dXJuIHN0cnVjdHVyZWQgZGF0YSBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5zdHJ1Y3R1cmVkKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGV4cGxhbmF0aW9uOiByZXN1bHQuZXhwbGFuYXRpb24sXG4gICAgICAgICAgICAgIHN0cnVjdHVyZWQ6IHJlc3VsdC5zdHJ1Y3R1cmVkLFxuICAgICAgICAgICAgICBjYWNoZWQ6IHJlc3VsdC5jYWNoZWQgfHwgZmFsc2UsXG4gICAgICAgICAgICAgIG1vZGVsOiByZXN1bHQubW9kZWwsXG4gICAgICAgICAgICAgIHRva2Vuc1VzZWQ6IHJlc3VsdC50b2tlbnNVc2VkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJkYXNoYm9hcmRcIjoge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRhdGEgYXMgRGFzaGJvYXJkSW5zaWdodElucHV0XG4gICAgICAgIGlmIChpbnB1dC50b3RhbFJlc291cmNlcyA9PT0gdW5kZWZpbmVkIHx8IGlucHV0LnRvdGFsRGV0ZWN0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTWlzc2luZyByZXF1aXJlZCBmaWVsZHMgZm9yIGRhc2hib2FyZCBpbnNpZ2h0XCIgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBhd2FpdCBnZW5lcmF0ZURhc2hib2FyZEluc2lnaHQoaW5wdXQpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJidWxrXCI6IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkYXRhIGFzIEJ1bGtBY3Rpb25TdW1tYXJ5SW5wdXRcbiAgICAgICAgaWYgKGlucHV0LmV4ZWN1dGVkQ291bnQgPT09IHVuZGVmaW5lZCB8fCAhaW5wdXQuYWN0aW9ucykge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzIGZvciBidWxrIGFjdGlvbiBzdW1tYXJ5XCIgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBhd2FpdCBzdW1tYXJpemVCdWxrQWN0aW9ucyhpbnB1dClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSBcImJhdGNoXCI6IHtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gZGF0YSBhcyBSZWNvbW1lbmRhdGlvbkV4cGxhbmF0aW9uSW5wdXRbXVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXRzKSB8fCBpbnB1dHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGF0YSBtdXN0IGJlIGEgbm9uLWVtcHR5IGFycmF5IGZvciBiYXRjaCBleHBsYW5hdGlvbnNcIiB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dHMubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJNYXhpbXVtIDEwIHJlY29tbWVuZGF0aW9ucyBwZXIgYmF0Y2ggcmVxdWVzdFwiIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGV4cGxhaW5SZWNvbW1lbmRhdGlvbnNCYXRjaChpbnB1dHMpXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiByZXN1bHRzLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBVbmtub3duIHR5cGU6ICR7dHlwZX0uIFZhbGlkIHR5cGVzOiByZWNvbW1lbmRhdGlvbiwgcmVjb21tZW5kYXRpb24tc3RydWN0dXJlZCwgZGFzaGJvYXJkLCBidWxrLCBiYXRjaGAgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKVxuICAgIH1cblxuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHJlc3VsdC5lcnJvciB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZXhwbGFuYXRpb246IHJlc3VsdC5leHBsYW5hdGlvbixcbiAgICAgICAgY2FjaGVkOiByZXN1bHQuY2FjaGVkIHx8IGZhbHNlLFxuICAgICAgICBtb2RlbDogcmVzdWx0Lm1vZGVsLFxuICAgICAgICB0b2tlbnNVc2VkOiByZXN1bHQudG9rZW5zVXNlZCxcbiAgICAgIH0sXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW0FQSV0gL2FwaS9haS9leHBsYWluIGVycm9yOlwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuLyoqXG4gKiBHRVQgL2FwaS9haS9leHBsYWluXG4gKlxuICogQ2hlY2sgQUkgc2VydmljZSBzdGF0dXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIGRhdGE6IHtcbiAgICAgIGNvbmZpZ3VyZWQ6IGlzT3BlbkFJQ29uZmlndXJlZCgpLFxuICAgICAgbWVzc2FnZTogaXNPcGVuQUlDb25maWd1cmVkKClcbiAgICAgICAgPyBcIk9wZW5BSSBBUEkgaXMgY29uZmlndXJlZCBhbmQgcmVhZHlcIlxuICAgICAgICA6IFwiT3BlbkFJIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQuIEFkZCBPUEVOQUlfQVBJX0tFWSB0byAuZW52LmxvY2FsXCIsXG4gICAgfSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJleHBsYWluUmVjb21tZW5kYXRpb24iLCJleHBsYWluUmVjb21tZW5kYXRpb25TdHJ1Y3R1cmVkIiwiZ2VuZXJhdGVEYXNoYm9hcmRJbnNpZ2h0Iiwic3VtbWFyaXplQnVsa0FjdGlvbnMiLCJleHBsYWluUmVjb21tZW5kYXRpb25zQmF0Y2giLCJpc09wZW5BSUNvbmZpZ3VyZWQiLCJQT1NUIiwicmVxdWVzdCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJib2R5IiwidHlwZSIsImRhdGEiLCJyZXN1bHQiLCJpbnB1dCIsInJlc291cmNlTmFtZSIsInNjZW5hcmlvSWQiLCJzdHJ1Y3R1cmVkIiwiZXhwbGFuYXRpb24iLCJjYWNoZWQiLCJtb2RlbCIsInRva2Vuc1VzZWQiLCJ0b3RhbFJlc291cmNlcyIsInVuZGVmaW5lZCIsInRvdGFsRGV0ZWN0aW9ucyIsImV4ZWN1dGVkQ291bnQiLCJhY3Rpb25zIiwiaW5wdXRzIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwicmVzdWx0cyIsImNvbnNvbGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJHRVQiLCJjb25maWd1cmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai/explain/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai/client.ts":
/*!**************************!*\
  !*** ./lib/ai/client.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ADVANCED_MODEL: () => (/* binding */ ADVANCED_MODEL),\n/* harmony export */   DEFAULT_CONFIG: () => (/* binding */ DEFAULT_CONFIG),\n/* harmony export */   DEFAULT_MODEL: () => (/* binding */ DEFAULT_MODEL),\n/* harmony export */   getOpenAIClient: () => (/* binding */ getOpenAIClient),\n/* harmony export */   isOpenAIConfigured: () => (/* binding */ isOpenAIConfigured)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n// Singleton OpenAI client instance\nlet openaiClient = null;\n/**\n * Get or create the OpenAI client instance\n * Uses the OPENAI_API_KEY environment variable\n */ function getOpenAIClient() {\n    if (!openaiClient) {\n        const apiKey = process.env.OPENAI_API_KEY;\n        if (!apiKey) {\n            throw new Error(\"OPENAI_API_KEY environment variable is not set. \" + \"Please add your OpenAI API key to .env.local\");\n        }\n        openaiClient = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            apiKey\n        });\n    }\n    return openaiClient;\n}\n/**\n * Check if OpenAI API is configured\n */ function isOpenAIConfigured() {\n    return !!process.env.OPENAI_API_KEY;\n}\n/**\n * Default model for cost optimization explanations\n * Using gpt-4o-mini for cost-effectiveness with good quality\n */ const DEFAULT_MODEL = \"gpt-4o-mini\";\n/**\n * Model for more complex analysis (when needed)\n */ const ADVANCED_MODEL = \"gpt-4o\";\n/**\n * Default configuration for explanation generation\n */ const DEFAULT_CONFIG = {\n    model: DEFAULT_MODEL,\n    maxTokens: 500,\n    temperature: 0.3\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWkvY2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyQjtBQUUzQixtQ0FBbUM7QUFDbkMsSUFBSUMsZUFBOEI7QUFFbEM7OztDQUdDLEdBQ00sU0FBU0M7SUFDZCxJQUFJLENBQUNELGNBQWM7UUFDakIsTUFBTUUsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO1FBRXpDLElBQUksQ0FBQ0gsUUFBUTtZQUNYLE1BQU0sSUFBSUksTUFDUixxREFDQTtRQUVKO1FBRUFOLGVBQWUsSUFBSUQsOENBQU1BLENBQUM7WUFDeEJHO1FBQ0Y7SUFDRjtJQUVBLE9BQU9GO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLFNBQVNPO0lBQ2QsT0FBTyxDQUFDLENBQUNKLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUNyQztBQUVBOzs7Q0FHQyxHQUNNLE1BQU1HLGdCQUFnQixjQUFhO0FBRTFDOztDQUVDLEdBQ00sTUFBTUMsaUJBQWlCLFNBQVE7QUFXdEM7O0NBRUMsR0FDTSxNQUFNQyxpQkFBa0M7SUFDN0NDLE9BQU9IO0lBQ1BJLFdBQVc7SUFDWEMsYUFBYTtBQUNmLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZ2VudGljLWFpLXBsYXRmb3JtLy4vbGliL2FpL2NsaWVudC50cz83MTg4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPcGVuQUkgZnJvbSBcIm9wZW5haVwiXG5cbi8vIFNpbmdsZXRvbiBPcGVuQUkgY2xpZW50IGluc3RhbmNlXG5sZXQgb3BlbmFpQ2xpZW50OiBPcGVuQUkgfCBudWxsID0gbnVsbFxuXG4vKipcbiAqIEdldCBvciBjcmVhdGUgdGhlIE9wZW5BSSBjbGllbnQgaW5zdGFuY2VcbiAqIFVzZXMgdGhlIE9QRU5BSV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVuQUlDbGllbnQoKTogT3BlbkFJIHtcbiAgaWYgKCFvcGVuYWlDbGllbnQpIHtcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWVxuXG4gICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJPUEVOQUlfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3Qgc2V0LiBcIiArXG4gICAgICAgIFwiUGxlYXNlIGFkZCB5b3VyIE9wZW5BSSBBUEkga2V5IHRvIC5lbnYubG9jYWxcIlxuICAgICAgKVxuICAgIH1cblxuICAgIG9wZW5haUNsaWVudCA9IG5ldyBPcGVuQUkoe1xuICAgICAgYXBpS2V5LFxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gb3BlbmFpQ2xpZW50XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgT3BlbkFJIEFQSSBpcyBjb25maWd1cmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09wZW5BSUNvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZXG59XG5cbi8qKlxuICogRGVmYXVsdCBtb2RlbCBmb3IgY29zdCBvcHRpbWl6YXRpb24gZXhwbGFuYXRpb25zXG4gKiBVc2luZyBncHQtNG8tbWluaSBmb3IgY29zdC1lZmZlY3RpdmVuZXNzIHdpdGggZ29vZCBxdWFsaXR5XG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX01PREVMID0gXCJncHQtNG8tbWluaVwiXG5cbi8qKlxuICogTW9kZWwgZm9yIG1vcmUgY29tcGxleCBhbmFseXNpcyAod2hlbiBuZWVkZWQpXG4gKi9cbmV4cG9ydCBjb25zdCBBRFZBTkNFRF9NT0RFTCA9IFwiZ3B0LTRvXCJcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGZvciBBSSByZXF1ZXN0c1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEFJUmVxdWVzdENvbmZpZyB7XG4gIG1vZGVsPzogc3RyaW5nXG4gIG1heFRva2Vucz86IG51bWJlclxuICB0ZW1wZXJhdHVyZT86IG51bWJlclxufVxuXG4vKipcbiAqIERlZmF1bHQgY29uZmlndXJhdGlvbiBmb3IgZXhwbGFuYXRpb24gZ2VuZXJhdGlvblxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT05GSUc6IEFJUmVxdWVzdENvbmZpZyA9IHtcbiAgbW9kZWw6IERFRkFVTFRfTU9ERUwsXG4gIG1heFRva2VuczogNTAwLFxuICB0ZW1wZXJhdHVyZTogMC4zLCAvLyBMb3dlciB0ZW1wZXJhdHVyZSBmb3IgbW9yZSBmb2N1c2VkLCBjb25zaXN0ZW50IHJlc3BvbnNlc1xufVxuIl0sIm5hbWVzIjpbIk9wZW5BSSIsIm9wZW5haUNsaWVudCIsImdldE9wZW5BSUNsaWVudCIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIkVycm9yIiwiaXNPcGVuQUlDb25maWd1cmVkIiwiREVGQVVMVF9NT0RFTCIsIkFEVkFOQ0VEX01PREVMIiwiREVGQVVMVF9DT05GSUciLCJtb2RlbCIsIm1heFRva2VucyIsInRlbXBlcmF0dXJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai/client.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai/explain.ts":
/*!***************************!*\
  !*** ./lib/ai/explain.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearExplanationCache: () => (/* binding */ clearExplanationCache),\n/* harmony export */   explainRecommendation: () => (/* binding */ explainRecommendation),\n/* harmony export */   explainRecommendationStructured: () => (/* binding */ explainRecommendationStructured),\n/* harmony export */   explainRecommendationsBatch: () => (/* binding */ explainRecommendationsBatch),\n/* harmony export */   generateDashboardInsight: () => (/* binding */ generateDashboardInsight),\n/* harmony export */   getCacheStats: () => (/* binding */ getCacheStats),\n/* harmony export */   summarizeBulkActions: () => (/* binding */ summarizeBulkActions)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ \"(rsc)/./lib/ai/client.ts\");\n/* harmony import */ var _prompts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./prompts */ \"(rsc)/./lib/ai/prompts.ts\");\n\n\n// Simple in-memory cache for explanations\nconst explanationCache = new Map();\nconst CACHE_TTL_MS = 5 * 60 * 1000 // 5 minutes\n;\n/**\n * Generate a cache key from input\n */ function getCacheKey(type, input) {\n    return `${type}:${JSON.stringify(input)}`;\n}\n/**\n * Get cached explanation if available and not expired\n */ function getCachedExplanation(key) {\n    const cached = explanationCache.get(key);\n    if (cached && Date.now() - cached.timestamp < CACHE_TTL_MS) {\n        return cached.explanation;\n    }\n    explanationCache.delete(key);\n    return null;\n}\n/**\n * Cache an explanation\n */ function cacheExplanation(key, explanation) {\n    explanationCache.set(key, {\n        explanation,\n        timestamp: Date.now()\n    });\n}\n/**\n * Call OpenAI to generate an explanation\n */ async function callOpenAI(prompt, config = _client__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_CONFIG) {\n    if (!(0,_client__WEBPACK_IMPORTED_MODULE_0__.isOpenAIConfigured)()) {\n        return {\n            success: false,\n            explanation: null,\n            error: \"OpenAI API key not configured\"\n        };\n    }\n    try {\n        const client = (0,_client__WEBPACK_IMPORTED_MODULE_0__.getOpenAIClient)();\n        const response = await client.chat.completions.create({\n            model: config.model || _client__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_CONFIG.model,\n            max_tokens: config.maxTokens || _client__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_CONFIG.maxTokens,\n            temperature: config.temperature || _client__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_CONFIG.temperature,\n            messages: [\n                {\n                    role: \"system\",\n                    content: _prompts__WEBPACK_IMPORTED_MODULE_1__.SYSTEM_PROMPT\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ]\n        });\n        const explanation = response.choices[0]?.message?.content?.trim() || null;\n        if (!explanation) {\n            return {\n                success: false,\n                explanation: null,\n                error: \"No response from OpenAI\"\n            };\n        }\n        return {\n            success: true,\n            explanation,\n            model: response.model,\n            tokensUsed: response.usage?.total_tokens\n        };\n    } catch (error) {\n        console.error(\"[AI] OpenAI API error:\", error);\n        return {\n            success: false,\n            explanation: null,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n/**\n * Generate an explanation for a recommendation\n */ async function explainRecommendation(input, config) {\n    // Check cache first\n    const cacheKey = getCacheKey(\"recommendation\", input);\n    const cached = getCachedExplanation(cacheKey);\n    if (cached) {\n        return {\n            success: true,\n            explanation: cached,\n            cached: true\n        };\n    }\n    // Generate prompt and call API\n    const prompt = (0,_prompts__WEBPACK_IMPORTED_MODULE_1__.generateRecommendationPrompt)(input);\n    const result = await callOpenAI(prompt, config);\n    // Cache successful results\n    if (result.success && result.explanation) {\n        cacheExplanation(cacheKey, result.explanation);\n    }\n    return result;\n}\n/**\n * Generate a structured explanation for a recommendation\n * Returns both human-readable text and structured JSON data\n */ async function explainRecommendationStructured(input, config) {\n    // Check cache first\n    const cacheKey = getCacheKey(\"recommendation-structured\", input);\n    const cached = getCachedExplanation(cacheKey);\n    if (cached) {\n        try {\n            const structured = JSON.parse(cached);\n            return {\n                success: true,\n                explanation: structured.problem.summary,\n                structured,\n                cached: true\n            };\n        } catch  {\n        // If cache is corrupted, continue to regenerate\n        }\n    }\n    // Generate structured prompt and call API\n    const prompt = (0,_prompts__WEBPACK_IMPORTED_MODULE_1__.generateStructuredRecommendationPrompt)(input);\n    const result = await callOpenAI(prompt, config);\n    if (!result.success || !result.explanation) {\n        return result;\n    }\n    // Parse the JSON response\n    try {\n        // Extract JSON from the response (handle markdown code blocks)\n        let jsonStr = result.explanation;\n        const jsonMatch = jsonStr.match(/```(?:json)?\\s*([\\s\\S]*?)```/);\n        if (jsonMatch) {\n            jsonStr = jsonMatch[1].trim();\n        }\n        const structured = JSON.parse(jsonStr);\n        // Cache the structured result\n        cacheExplanation(cacheKey, JSON.stringify(structured));\n        return {\n            success: true,\n            explanation: structured.problem.summary,\n            structured,\n            model: result.model,\n            tokensUsed: result.tokensUsed\n        };\n    } catch (parseError) {\n        console.error(\"[AI] Failed to parse structured response:\", parseError);\n        // Fall back to the raw response as explanation\n        return {\n            success: true,\n            explanation: result.explanation,\n            structured: null,\n            model: result.model,\n            tokensUsed: result.tokensUsed\n        };\n    }\n}\n/**\n * Generate a dashboard insight\n */ async function generateDashboardInsight(input, config) {\n    // Check cache first\n    const cacheKey = getCacheKey(\"dashboard\", input);\n    const cached = getCachedExplanation(cacheKey);\n    if (cached) {\n        return {\n            success: true,\n            explanation: cached,\n            cached: true\n        };\n    }\n    // Generate prompt and call API\n    const prompt = (0,_prompts__WEBPACK_IMPORTED_MODULE_1__.generateDashboardInsightPrompt)(input);\n    const result = await callOpenAI(prompt, config);\n    // Cache successful results\n    if (result.success && result.explanation) {\n        cacheExplanation(cacheKey, result.explanation);\n    }\n    return result;\n}\n/**\n * Generate a summary for bulk actions\n */ async function summarizeBulkActions(input, config) {\n    // Check cache first\n    const cacheKey = getCacheKey(\"bulk\", input);\n    const cached = getCachedExplanation(cacheKey);\n    if (cached) {\n        return {\n            success: true,\n            explanation: cached,\n            cached: true\n        };\n    }\n    // Generate prompt and call API\n    const prompt = (0,_prompts__WEBPACK_IMPORTED_MODULE_1__.generateBulkActionSummaryPrompt)(input);\n    const result = await callOpenAI(prompt, config);\n    // Cache successful results\n    if (result.success && result.explanation) {\n        cacheExplanation(cacheKey, result.explanation);\n    }\n    return result;\n}\n/**\n * Batch generate explanations for multiple recommendations\n * Limits concurrency to avoid rate limits\n */ async function explainRecommendationsBatch(inputs, config, maxConcurrency = 3) {\n    const results = [];\n    // Process in batches to respect rate limits\n    for(let i = 0; i < inputs.length; i += maxConcurrency){\n        const batch = inputs.slice(i, i + maxConcurrency);\n        const batchResults = await Promise.all(batch.map((input)=>explainRecommendation(input, config)));\n        results.push(...batchResults);\n        // Small delay between batches to avoid rate limits\n        if (i + maxConcurrency < inputs.length) {\n            await new Promise((resolve)=>setTimeout(resolve, 100));\n        }\n    }\n    return results;\n}\n/**\n * Clear the explanation cache\n */ function clearExplanationCache() {\n    explanationCache.clear();\n}\n/**\n * Get cache statistics\n */ function getCacheStats() {\n    let oldest = null;\n    explanationCache.forEach((value)=>{\n        if (oldest === null || value.timestamp < oldest) {\n            oldest = value.timestamp;\n        }\n    });\n    return {\n        size: explanationCache.size,\n        oldestEntry: oldest\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU94QixPQUFPLElBQUl3QixPQUFPL0IsV0FBVyxFQUFFO1FBQ3hDRSxpQkFBaUI0QixVQUFVQyxPQUFPL0IsV0FBVztJQUMvQztJQUVBLE9BQU8rQjtBQUNUO0FBRUE7OztDQUdDLEdBQ00sZUFBZVksNEJBQ3BCQyxNQUF3QyxFQUN4Q3RDLE1BQXdCLEVBQ3hCdUMsaUJBQXlCLENBQUM7SUFFMUIsTUFBTUMsVUFBK0IsRUFBRTtJQUV2Qyw0Q0FBNEM7SUFDNUMsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlILE9BQU9JLE1BQU0sRUFBRUQsS0FBS0YsZUFBZ0I7UUFDdEQsTUFBTUksUUFBUUwsT0FBT00sS0FBSyxDQUFDSCxHQUFHQSxJQUFJRjtRQUNsQyxNQUFNTSxlQUFlLE1BQU1DLFFBQVFDLEdBQUcsQ0FDcENKLE1BQU1LLEdBQUcsQ0FBQyxDQUFDaEUsUUFBVXVDLHNCQUFzQnZDLE9BQU9nQjtRQUVwRHdDLFFBQVFTLElBQUksSUFBSUo7UUFFaEIsbURBQW1EO1FBQ25ELElBQUlKLElBQUlGLGlCQUFpQkQsT0FBT0ksTUFBTSxFQUFFO1lBQ3RDLE1BQU0sSUFBSUksUUFBUSxDQUFDSSxVQUFZQyxXQUFXRCxTQUFTO1FBQ3JEO0lBQ0Y7SUFFQSxPQUFPVjtBQUNUO0FBRUE7O0NBRUMsR0FDTSxTQUFTWTtJQUNkekUsaUJBQWlCMEUsS0FBSztBQUN4QjtBQUVBOztDQUVDLEdBQ00sU0FBU0M7SUFDZCxJQUFJQyxTQUF3QjtJQUM1QjVFLGlCQUFpQjZFLE9BQU8sQ0FBQyxDQUFDQztRQUN4QixJQUFJRixXQUFXLFFBQVFFLE1BQU1oRSxTQUFTLEdBQUc4RCxRQUFRO1lBQy9DQSxTQUFTRSxNQUFNaEUsU0FBUztRQUMxQjtJQUNGO0lBRUEsT0FBTztRQUNMaUUsTUFBTS9FLGlCQUFpQitFLElBQUk7UUFDM0JDLGFBQWFKO0lBQ2Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FnZW50aWMtYWktcGxhdGZvcm0vLi9saWIvYWkvZXhwbGFpbi50cz81NzA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE9wZW5BSUNsaWVudCwgaXNPcGVuQUlDb25maWd1cmVkLCBERUZBVUxUX0NPTkZJRywgQUlSZXF1ZXN0Q29uZmlnIH0gZnJvbSBcIi4vY2xpZW50XCJcbmltcG9ydCB7XG4gIFNZU1RFTV9QUk9NUFQsXG4gIGdlbmVyYXRlUmVjb21tZW5kYXRpb25Qcm9tcHQsXG4gIGdlbmVyYXRlU3RydWN0dXJlZFJlY29tbWVuZGF0aW9uUHJvbXB0LFxuICBnZW5lcmF0ZURhc2hib2FyZEluc2lnaHRQcm9tcHQsXG4gIGdlbmVyYXRlQnVsa0FjdGlvblN1bW1hcnlQcm9tcHQsXG59IGZyb20gXCIuL3Byb21wdHNcIlxuXG4vKipcbiAqIFN0cnVjdHVyZWQgZXhwbGFuYXRpb24gZm9yIGEgcmVjb21tZW5kYXRpb25cbiAqIFByb3ZpZGVzIGNsZWFyLCBvcmdhbml6ZWQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9wdGltaXphdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cnVjdHVyZWRFeHBsYW5hdGlvbiB7XG4gIC8vIEN1cnJlbnQgc3RhdGUgb2YgdGhlIHJlc291cmNlXG4gIGN1cnJlbnRTdGF0ZToge1xuICAgIHJlc291cmNlOiBzdHJpbmcgICAgICAgICAgIC8vIGUuZy4sIFwiRUMyIGluc3RhbmNlIHdlYi1zZXJ2ZXItcHJvZFwiXG4gICAgdHlwZTogc3RyaW5nICAgICAgICAgICAgICAgLy8gZS5nLiwgXCJ0My54bGFyZ2VcIlxuICAgIHV0aWxpemF0aW9uOiB7XG4gICAgICBtZXRyaWM6IHN0cmluZyAgICAgICAgICAgLy8gZS5nLiwgXCJDUFVcIiwgXCJNZW1vcnlcIiwgXCJDb25uZWN0aW9uc1wiXG4gICAgICBjdXJyZW50OiBzdHJpbmcgICAgICAgICAgLy8gZS5nLiwgXCI4JVwiLCBcIjI1NiBNQlwiXG4gICAgICBjYXBhY2l0eTogc3RyaW5nICAgICAgICAgLy8gZS5nLiwgXCIxMDAlXCIsIFwiMzAwOCBNQlwiXG4gICAgICBwZXJjZW50YWdlOiBudW1iZXIgICAgICAgLy8gZS5nLiwgOFxuICAgIH1bXVxuICB9XG4gIC8vIFdoeSB0aGlzIGlzIHdhc3RlZnVsXG4gIHByb2JsZW06IHtcbiAgICBzdW1tYXJ5OiBzdHJpbmcgICAgICAgICAgICAvLyBPbmUtbGluZSBzdW1tYXJ5XG4gICAgZGV0YWlsczogc3RyaW5nICAgICAgICAgICAgLy8gRGV0YWlsZWQgZXhwbGFuYXRpb25cbiAgfVxuICAvLyBXaGF0IGFjdGlvbiB3ZSByZWNvbW1lbmRcbiAgcmVjb21tZW5kYXRpb246IHtcbiAgICBhY3Rpb246IHN0cmluZyAgICAgICAgICAgICAvLyBlLmcuLCBcIlJpZ2h0c2l6ZVwiLCBcIkRlbGV0ZVwiLCBcIlN0b3BcIlxuICAgIHRhcmdldDogc3RyaW5nICAgICAgICAgICAgIC8vIGUuZy4sIFwidDMubWVkaXVtXCIsIFwiTi9BXCJcbiAgICByZWFzb246IHN0cmluZyAgICAgICAgICAgICAvLyBXaHkgdGhpcyBzcGVjaWZpYyBhY3Rpb25cbiAgfVxuICAvLyBGaW5hbmNpYWwgaW1wYWN0XG4gIGltcGFjdDoge1xuICAgIGN1cnJlbnRDb3N0OiBzdHJpbmcgICAgICAgIC8vIGUuZy4sIFwiJDEyMS40Ny9tb250aFwiXG4gICAgcHJvamVjdGVkQ29zdDogc3RyaW5nICAgICAgLy8gZS5nLiwgXCIkNjAuNzQvbW9udGhcIlxuICAgIHNhdmluZ3M6IHN0cmluZyAgICAgICAgICAgIC8vIGUuZy4sIFwiJDYwLjczL21vbnRoXCJcbiAgICBzYXZpbmdzUGVyY2VudDogbnVtYmVyICAgICAvLyBlLmcuLCA1MFxuICB9XG4gIC8vIFJpc2sgYXNzZXNzbWVudFxuICByaXNrOiB7XG4gICAgbGV2ZWw6IFwibG93XCIgfCBcIm1lZGl1bVwiIHwgXCJoaWdoXCJcbiAgICBjb25zaWRlcmF0aW9uczogc3RyaW5nW10gICAvLyBUaGluZ3MgdG8gY2hlY2sgYmVmb3JlIGFjdGluZ1xuICB9XG59XG5cbi8qKlxuICogUmVzdWx0IG9mIGFuIEFJIGV4cGxhbmF0aW9uIHJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFeHBsYW5hdGlvblJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW5cbiAgZXhwbGFuYXRpb246IHN0cmluZyB8IG51bGxcbiAgc3RydWN0dXJlZD86IFN0cnVjdHVyZWRFeHBsYW5hdGlvbiB8IG51bGxcbiAgZXJyb3I/OiBzdHJpbmdcbiAgY2FjaGVkPzogYm9vbGVhblxuICBtb2RlbD86IHN0cmluZ1xuICB0b2tlbnNVc2VkPzogbnVtYmVyXG59XG5cbi8qKlxuICogSW5wdXQgZm9yIHJlY29tbWVuZGF0aW9uIGV4cGxhbmF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb21tZW5kYXRpb25FeHBsYW5hdGlvbklucHV0IHtcbiAgcmVzb3VyY2VOYW1lOiBzdHJpbmdcbiAgcmVzb3VyY2VUeXBlOiBzdHJpbmdcbiAgc2NlbmFyaW9JZDogc3RyaW5nXG4gIHNjZW5hcmlvTmFtZTogc3RyaW5nXG4gIGFjdGlvbjogc3RyaW5nXG4gIHBvdGVudGlhbFNhdmluZ3M6IG51bWJlclxuICBjdXJyZW50Q29zdDogbnVtYmVyXG4gIGRldGFpbHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIHJlZ2lvbj86IHN0cmluZ1xuICBlbnY/OiBzdHJpbmdcbn1cblxuLyoqXG4gKiBJbnB1dCBmb3IgZGFzaGJvYXJkIGluc2lnaHRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEYXNoYm9hcmRJbnNpZ2h0SW5wdXQge1xuICB0b3RhbFJlc291cmNlczogbnVtYmVyXG4gIHRvdGFsRGV0ZWN0aW9uczogbnVtYmVyXG4gIHRvdGFsU2F2aW5nczogbnVtYmVyXG4gIHRvcFNjZW5hcmlvczogeyBuYW1lOiBzdHJpbmc7IGNvdW50OiBudW1iZXI7IHNhdmluZ3M6IG51bWJlciB9W11cbiAgYXV0b1NhZmVDb3VudDogbnVtYmVyXG4gIGFwcHJvdmFsQ291bnQ6IG51bWJlclxufVxuXG4vKipcbiAqIElucHV0IGZvciBidWxrIGFjdGlvbiBzdW1tYXJ5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQnVsa0FjdGlvblN1bW1hcnlJbnB1dCB7XG4gIGV4ZWN1dGVkQ291bnQ6IG51bWJlclxuICBzdWNjZXNzQ291bnQ6IG51bWJlclxuICBmYWlsZWRDb3VudDogbnVtYmVyXG4gIHRvdGFsU2F2aW5nczogbnVtYmVyXG4gIGFjdGlvbnM6IHsgcmVzb3VyY2VOYW1lOiBzdHJpbmc7IGFjdGlvbjogc3RyaW5nOyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfVtdXG59XG5cbi8vIFNpbXBsZSBpbi1tZW1vcnkgY2FjaGUgZm9yIGV4cGxhbmF0aW9uc1xuY29uc3QgZXhwbGFuYXRpb25DYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCB7IGV4cGxhbmF0aW9uOiBzdHJpbmc7IHRpbWVzdGFtcDogbnVtYmVyIH0+KClcbmNvbnN0IENBQ0hFX1RUTF9NUyA9IDUgKiA2MCAqIDEwMDAgLy8gNSBtaW51dGVzXG5cbi8qKlxuICogR2VuZXJhdGUgYSBjYWNoZSBrZXkgZnJvbSBpbnB1dFxuICovXG5mdW5jdGlvbiBnZXRDYWNoZUtleSh0eXBlOiBzdHJpbmcsIGlucHV0OiB1bmtub3duKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke3R5cGV9OiR7SlNPTi5zdHJpbmdpZnkoaW5wdXQpfWBcbn1cblxuLyoqXG4gKiBHZXQgY2FjaGVkIGV4cGxhbmF0aW9uIGlmIGF2YWlsYWJsZSBhbmQgbm90IGV4cGlyZWRcbiAqL1xuZnVuY3Rpb24gZ2V0Q2FjaGVkRXhwbGFuYXRpb24oa2V5OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgY2FjaGVkID0gZXhwbGFuYXRpb25DYWNoZS5nZXQoa2V5KVxuICBpZiAoY2FjaGVkICYmIERhdGUubm93KCkgLSBjYWNoZWQudGltZXN0YW1wIDwgQ0FDSEVfVFRMX01TKSB7XG4gICAgcmV0dXJuIGNhY2hlZC5leHBsYW5hdGlvblxuICB9XG4gIGV4cGxhbmF0aW9uQ2FjaGUuZGVsZXRlKGtleSlcbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBDYWNoZSBhbiBleHBsYW5hdGlvblxuICovXG5mdW5jdGlvbiBjYWNoZUV4cGxhbmF0aW9uKGtleTogc3RyaW5nLCBleHBsYW5hdGlvbjogc3RyaW5nKTogdm9pZCB7XG4gIGV4cGxhbmF0aW9uQ2FjaGUuc2V0KGtleSwgeyBleHBsYW5hdGlvbiwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pXG59XG5cbi8qKlxuICogQ2FsbCBPcGVuQUkgdG8gZ2VuZXJhdGUgYW4gZXhwbGFuYXRpb25cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2FsbE9wZW5BSShcbiAgcHJvbXB0OiBzdHJpbmcsXG4gIGNvbmZpZzogQUlSZXF1ZXN0Q29uZmlnID0gREVGQVVMVF9DT05GSUdcbik6IFByb21pc2U8RXhwbGFuYXRpb25SZXN1bHQ+IHtcbiAgaWYgKCFpc09wZW5BSUNvbmZpZ3VyZWQoKSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGV4cGxhbmF0aW9uOiBudWxsLFxuICAgICAgZXJyb3I6IFwiT3BlbkFJIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWRcIixcbiAgICB9XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IGdldE9wZW5BSUNsaWVudCgpXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCB8fCBERUZBVUxUX0NPTkZJRy5tb2RlbCEsXG4gICAgICBtYXhfdG9rZW5zOiBjb25maWcubWF4VG9rZW5zIHx8IERFRkFVTFRfQ09ORklHLm1heFRva2VucyxcbiAgICAgIHRlbXBlcmF0dXJlOiBjb25maWcudGVtcGVyYXR1cmUgfHwgREVGQVVMVF9DT05GSUcudGVtcGVyYXR1cmUsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQ6IFNZU1RFTV9QUk9NUFQgfSxcbiAgICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogcHJvbXB0IH0sXG4gICAgICBdLFxuICAgIH0pXG5cbiAgICBjb25zdCBleHBsYW5hdGlvbiA9IHJlc3BvbnNlLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ/LnRyaW0oKSB8fCBudWxsXG5cbiAgICBpZiAoIWV4cGxhbmF0aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXhwbGFuYXRpb246IG51bGwsXG4gICAgICAgIGVycm9yOiBcIk5vIHJlc3BvbnNlIGZyb20gT3BlbkFJXCIsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBleHBsYW5hdGlvbixcbiAgICAgIG1vZGVsOiByZXNwb25zZS5tb2RlbCxcbiAgICAgIHRva2Vuc1VzZWQ6IHJlc3BvbnNlLnVzYWdlPy50b3RhbF90b2tlbnMsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbQUldIE9wZW5BSSBBUEkgZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGV4cGxhbmF0aW9uOiBudWxsLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYW4gZXhwbGFuYXRpb24gZm9yIGEgcmVjb21tZW5kYXRpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4cGxhaW5SZWNvbW1lbmRhdGlvbihcbiAgaW5wdXQ6IFJlY29tbWVuZGF0aW9uRXhwbGFuYXRpb25JbnB1dCxcbiAgY29uZmlnPzogQUlSZXF1ZXN0Q29uZmlnXG4pOiBQcm9taXNlPEV4cGxhbmF0aW9uUmVzdWx0PiB7XG4gIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gIGNvbnN0IGNhY2hlS2V5ID0gZ2V0Q2FjaGVLZXkoXCJyZWNvbW1lbmRhdGlvblwiLCBpbnB1dClcbiAgY29uc3QgY2FjaGVkID0gZ2V0Q2FjaGVkRXhwbGFuYXRpb24oY2FjaGVLZXkpXG4gIGlmIChjYWNoZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGV4cGxhbmF0aW9uOiBjYWNoZWQsXG4gICAgICBjYWNoZWQ6IHRydWUsXG4gICAgfVxuICB9XG5cbiAgLy8gR2VuZXJhdGUgcHJvbXB0IGFuZCBjYWxsIEFQSVxuICBjb25zdCBwcm9tcHQgPSBnZW5lcmF0ZVJlY29tbWVuZGF0aW9uUHJvbXB0KGlucHV0KVxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsT3BlbkFJKHByb21wdCwgY29uZmlnKVxuXG4gIC8vIENhY2hlIHN1Y2Nlc3NmdWwgcmVzdWx0c1xuICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmV4cGxhbmF0aW9uKSB7XG4gICAgY2FjaGVFeHBsYW5hdGlvbihjYWNoZUtleSwgcmVzdWx0LmV4cGxhbmF0aW9uKVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgc3RydWN0dXJlZCBleHBsYW5hdGlvbiBmb3IgYSByZWNvbW1lbmRhdGlvblxuICogUmV0dXJucyBib3RoIGh1bWFuLXJlYWRhYmxlIHRleHQgYW5kIHN0cnVjdHVyZWQgSlNPTiBkYXRhXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHBsYWluUmVjb21tZW5kYXRpb25TdHJ1Y3R1cmVkKFxuICBpbnB1dDogUmVjb21tZW5kYXRpb25FeHBsYW5hdGlvbklucHV0LFxuICBjb25maWc/OiBBSVJlcXVlc3RDb25maWdcbik6IFByb21pc2U8RXhwbGFuYXRpb25SZXN1bHQ+IHtcbiAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgY29uc3QgY2FjaGVLZXkgPSBnZXRDYWNoZUtleShcInJlY29tbWVuZGF0aW9uLXN0cnVjdHVyZWRcIiwgaW5wdXQpXG4gIGNvbnN0IGNhY2hlZCA9IGdldENhY2hlZEV4cGxhbmF0aW9uKGNhY2hlS2V5KVxuICBpZiAoY2FjaGVkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0cnVjdHVyZWQgPSBKU09OLnBhcnNlKGNhY2hlZCkgYXMgU3RydWN0dXJlZEV4cGxhbmF0aW9uXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBleHBsYW5hdGlvbjogc3RydWN0dXJlZC5wcm9ibGVtLnN1bW1hcnksXG4gICAgICAgIHN0cnVjdHVyZWQsXG4gICAgICAgIGNhY2hlZDogdHJ1ZSxcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIElmIGNhY2hlIGlzIGNvcnJ1cHRlZCwgY29udGludWUgdG8gcmVnZW5lcmF0ZVxuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHN0cnVjdHVyZWQgcHJvbXB0IGFuZCBjYWxsIEFQSVxuICBjb25zdCBwcm9tcHQgPSBnZW5lcmF0ZVN0cnVjdHVyZWRSZWNvbW1lbmRhdGlvblByb21wdChpbnB1dClcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FsbE9wZW5BSShwcm9tcHQsIGNvbmZpZylcblxuICBpZiAoIXJlc3VsdC5zdWNjZXNzIHx8ICFyZXN1bHQuZXhwbGFuYXRpb24pIHtcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICAvLyBQYXJzZSB0aGUgSlNPTiByZXNwb25zZVxuICB0cnkge1xuICAgIC8vIEV4dHJhY3QgSlNPTiBmcm9tIHRoZSByZXNwb25zZSAoaGFuZGxlIG1hcmtkb3duIGNvZGUgYmxvY2tzKVxuICAgIGxldCBqc29uU3RyID0gcmVzdWx0LmV4cGxhbmF0aW9uXG4gICAgY29uc3QganNvbk1hdGNoID0ganNvblN0ci5tYXRjaCgvYGBgKD86anNvbik/XFxzKihbXFxzXFxTXSo/KWBgYC8pXG4gICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAganNvblN0ciA9IGpzb25NYXRjaFsxXS50cmltKClcbiAgICB9XG5cbiAgICBjb25zdCBzdHJ1Y3R1cmVkID0gSlNPTi5wYXJzZShqc29uU3RyKSBhcyBTdHJ1Y3R1cmVkRXhwbGFuYXRpb25cblxuICAgIC8vIENhY2hlIHRoZSBzdHJ1Y3R1cmVkIHJlc3VsdFxuICAgIGNhY2hlRXhwbGFuYXRpb24oY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KHN0cnVjdHVyZWQpKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBleHBsYW5hdGlvbjogc3RydWN0dXJlZC5wcm9ibGVtLnN1bW1hcnksXG4gICAgICBzdHJ1Y3R1cmVkLFxuICAgICAgbW9kZWw6IHJlc3VsdC5tb2RlbCxcbiAgICAgIHRva2Vuc1VzZWQ6IHJlc3VsdC50b2tlbnNVc2VkLFxuICAgIH1cbiAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbQUldIEZhaWxlZCB0byBwYXJzZSBzdHJ1Y3R1cmVkIHJlc3BvbnNlOlwiLCBwYXJzZUVycm9yKVxuICAgIC8vIEZhbGwgYmFjayB0byB0aGUgcmF3IHJlc3BvbnNlIGFzIGV4cGxhbmF0aW9uXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBleHBsYW5hdGlvbjogcmVzdWx0LmV4cGxhbmF0aW9uLFxuICAgICAgc3RydWN0dXJlZDogbnVsbCxcbiAgICAgIG1vZGVsOiByZXN1bHQubW9kZWwsXG4gICAgICB0b2tlbnNVc2VkOiByZXN1bHQudG9rZW5zVXNlZCxcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIGRhc2hib2FyZCBpbnNpZ2h0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZURhc2hib2FyZEluc2lnaHQoXG4gIGlucHV0OiBEYXNoYm9hcmRJbnNpZ2h0SW5wdXQsXG4gIGNvbmZpZz86IEFJUmVxdWVzdENvbmZpZ1xuKTogUHJvbWlzZTxFeHBsYW5hdGlvblJlc3VsdD4ge1xuICAvLyBDaGVjayBjYWNoZSBmaXJzdFxuICBjb25zdCBjYWNoZUtleSA9IGdldENhY2hlS2V5KFwiZGFzaGJvYXJkXCIsIGlucHV0KVxuICBjb25zdCBjYWNoZWQgPSBnZXRDYWNoZWRFeHBsYW5hdGlvbihjYWNoZUtleSlcbiAgaWYgKGNhY2hlZCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZXhwbGFuYXRpb246IGNhY2hlZCxcbiAgICAgIGNhY2hlZDogdHJ1ZSxcbiAgICB9XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBwcm9tcHQgYW5kIGNhbGwgQVBJXG4gIGNvbnN0IHByb21wdCA9IGdlbmVyYXRlRGFzaGJvYXJkSW5zaWdodFByb21wdChpbnB1dClcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FsbE9wZW5BSShwcm9tcHQsIGNvbmZpZylcblxuICAvLyBDYWNoZSBzdWNjZXNzZnVsIHJlc3VsdHNcbiAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5leHBsYW5hdGlvbikge1xuICAgIGNhY2hlRXhwbGFuYXRpb24oY2FjaGVLZXksIHJlc3VsdC5leHBsYW5hdGlvbilcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHN1bW1hcnkgZm9yIGJ1bGsgYWN0aW9uc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3VtbWFyaXplQnVsa0FjdGlvbnMoXG4gIGlucHV0OiBCdWxrQWN0aW9uU3VtbWFyeUlucHV0LFxuICBjb25maWc/OiBBSVJlcXVlc3RDb25maWdcbik6IFByb21pc2U8RXhwbGFuYXRpb25SZXN1bHQ+IHtcbiAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgY29uc3QgY2FjaGVLZXkgPSBnZXRDYWNoZUtleShcImJ1bGtcIiwgaW5wdXQpXG4gIGNvbnN0IGNhY2hlZCA9IGdldENhY2hlZEV4cGxhbmF0aW9uKGNhY2hlS2V5KVxuICBpZiAoY2FjaGVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBleHBsYW5hdGlvbjogY2FjaGVkLFxuICAgICAgY2FjaGVkOiB0cnVlLFxuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHByb21wdCBhbmQgY2FsbCBBUElcbiAgY29uc3QgcHJvbXB0ID0gZ2VuZXJhdGVCdWxrQWN0aW9uU3VtbWFyeVByb21wdChpbnB1dClcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FsbE9wZW5BSShwcm9tcHQsIGNvbmZpZylcblxuICAvLyBDYWNoZSBzdWNjZXNzZnVsIHJlc3VsdHNcbiAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5leHBsYW5hdGlvbikge1xuICAgIGNhY2hlRXhwbGFuYXRpb24oY2FjaGVLZXksIHJlc3VsdC5leHBsYW5hdGlvbilcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuLyoqXG4gKiBCYXRjaCBnZW5lcmF0ZSBleHBsYW5hdGlvbnMgZm9yIG11bHRpcGxlIHJlY29tbWVuZGF0aW9uc1xuICogTGltaXRzIGNvbmN1cnJlbmN5IHRvIGF2b2lkIHJhdGUgbGltaXRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHBsYWluUmVjb21tZW5kYXRpb25zQmF0Y2goXG4gIGlucHV0czogUmVjb21tZW5kYXRpb25FeHBsYW5hdGlvbklucHV0W10sXG4gIGNvbmZpZz86IEFJUmVxdWVzdENvbmZpZyxcbiAgbWF4Q29uY3VycmVuY3k6IG51bWJlciA9IDNcbik6IFByb21pc2U8RXhwbGFuYXRpb25SZXN1bHRbXT4ge1xuICBjb25zdCByZXN1bHRzOiBFeHBsYW5hdGlvblJlc3VsdFtdID0gW11cblxuICAvLyBQcm9jZXNzIGluIGJhdGNoZXMgdG8gcmVzcGVjdCByYXRlIGxpbWl0c1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkgKz0gbWF4Q29uY3VycmVuY3kpIHtcbiAgICBjb25zdCBiYXRjaCA9IGlucHV0cy5zbGljZShpLCBpICsgbWF4Q29uY3VycmVuY3kpXG4gICAgY29uc3QgYmF0Y2hSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBiYXRjaC5tYXAoKGlucHV0KSA9PiBleHBsYWluUmVjb21tZW5kYXRpb24oaW5wdXQsIGNvbmZpZykpXG4gICAgKVxuICAgIHJlc3VsdHMucHVzaCguLi5iYXRjaFJlc3VsdHMpXG5cbiAgICAvLyBTbWFsbCBkZWxheSBiZXR3ZWVuIGJhdGNoZXMgdG8gYXZvaWQgcmF0ZSBsaW1pdHNcbiAgICBpZiAoaSArIG1heENvbmN1cnJlbmN5IDwgaW5wdXRzLmxlbmd0aCkge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0c1xufVxuXG4vKipcbiAqIENsZWFyIHRoZSBleHBsYW5hdGlvbiBjYWNoZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJFeHBsYW5hdGlvbkNhY2hlKCk6IHZvaWQge1xuICBleHBsYW5hdGlvbkNhY2hlLmNsZWFyKClcbn1cblxuLyoqXG4gKiBHZXQgY2FjaGUgc3RhdGlzdGljc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVTdGF0cygpOiB7IHNpemU6IG51bWJlcjsgb2xkZXN0RW50cnk6IG51bWJlciB8IG51bGwgfSB7XG4gIGxldCBvbGRlc3Q6IG51bWJlciB8IG51bGwgPSBudWxsXG4gIGV4cGxhbmF0aW9uQ2FjaGUuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICBpZiAob2xkZXN0ID09PSBudWxsIHx8IHZhbHVlLnRpbWVzdGFtcCA8IG9sZGVzdCkge1xuICAgICAgb2xkZXN0ID0gdmFsdWUudGltZXN0YW1wXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgc2l6ZTogZXhwbGFuYXRpb25DYWNoZS5zaXplLFxuICAgIG9sZGVzdEVudHJ5OiBvbGRlc3QsXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRPcGVuQUlDbGllbnQiLCJpc09wZW5BSUNvbmZpZ3VyZWQiLCJERUZBVUxUX0NPTkZJRyIsIlNZU1RFTV9QUk9NUFQiLCJnZW5lcmF0ZVJlY29tbWVuZGF0aW9uUHJvbXB0IiwiZ2VuZXJhdGVTdHJ1Y3R1cmVkUmVjb21tZW5kYXRpb25Qcm9tcHQiLCJnZW5lcmF0ZURhc2hib2FyZEluc2lnaHRQcm9tcHQiLCJnZW5lcmF0ZUJ1bGtBY3Rpb25TdW1tYXJ5UHJvbXB0IiwiZXhwbGFuYXRpb25DYWNoZSIsIk1hcCIsIkNBQ0hFX1RUTF9NUyIsImdldENhY2hlS2V5IiwidHlwZSIsImlucHV0IiwiSlNPTiIsInN0cmluZ2lmeSIsImdldENhY2hlZEV4cGxhbmF0aW9uIiwia2V5IiwiY2FjaGVkIiwiZ2V0IiwiRGF0ZSIsIm5vdyIsInRpbWVzdGFtcCIsImV4cGxhbmF0aW9uIiwiZGVsZXRlIiwiY2FjaGVFeHBsYW5hdGlvbiIsInNldCIsImNhbGxPcGVuQUkiLCJwcm9tcHQiLCJjb25maWciLCJzdWNjZXNzIiwiZXJyb3IiLCJjbGllbnQiLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWF4X3Rva2VucyIsIm1heFRva2VucyIsInRlbXBlcmF0dXJlIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsImNob2ljZXMiLCJtZXNzYWdlIiwidHJpbSIsInRva2Vuc1VzZWQiLCJ1c2FnZSIsInRvdGFsX3Rva2VucyIsImNvbnNvbGUiLCJFcnJvciIsImV4cGxhaW5SZWNvbW1lbmRhdGlvbiIsImNhY2hlS2V5IiwicmVzdWx0IiwiZXhwbGFpblJlY29tbWVuZGF0aW9uU3RydWN0dXJlZCIsInN0cnVjdHVyZWQiLCJwYXJzZSIsInByb2JsZW0iLCJzdW1tYXJ5IiwianNvblN0ciIsImpzb25NYXRjaCIsIm1hdGNoIiwicGFyc2VFcnJvciIsImdlbmVyYXRlRGFzaGJvYXJkSW5zaWdodCIsInN1bW1hcml6ZUJ1bGtBY3Rpb25zIiwiZXhwbGFpblJlY29tbWVuZGF0aW9uc0JhdGNoIiwiaW5wdXRzIiwibWF4Q29uY3VycmVuY3kiLCJyZXN1bHRzIiwiaSIsImxlbmd0aCIsImJhdGNoIiwic2xpY2UiLCJiYXRjaFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwicHVzaCIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY2xlYXJFeHBsYW5hdGlvbkNhY2hlIiwiY2xlYXIiLCJnZXRDYWNoZVN0YXRzIiwib2xkZXN0IiwiZm9yRWFjaCIsInZhbHVlIiwic2l6ZSIsIm9sZGVzdEVudHJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai/explain.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai/prompts.ts":
/*!***************************!*\
  !*** ./lib/ai/prompts.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESOURCE_TYPE_NAMES: () => (/* binding */ RESOURCE_TYPE_NAMES),\n/* harmony export */   SCENARIO_CONTEXT: () => (/* binding */ SCENARIO_CONTEXT),\n/* harmony export */   SYSTEM_PROMPT: () => (/* binding */ SYSTEM_PROMPT),\n/* harmony export */   generateBulkActionSummaryPrompt: () => (/* binding */ generateBulkActionSummaryPrompt),\n/* harmony export */   generateDashboardInsightPrompt: () => (/* binding */ generateDashboardInsightPrompt),\n/* harmony export */   generateRecommendationPrompt: () => (/* binding */ generateRecommendationPrompt),\n/* harmony export */   generateStructuredRecommendationPrompt: () => (/* binding */ generateStructuredRecommendationPrompt)\n/* harmony export */ });\n/**\n * AI Prompts for Cloud Cost Optimization\n *\n * These prompts are designed to generate helpful, actionable explanations\n * for cloud resource optimization recommendations.\n */ /**\n * System prompt for the AI assistant\n */ const SYSTEM_PROMPT = `You are a cloud cost optimization expert helping engineers understand and act on AWS cost-saving recommendations. Your explanations should be:\n\n1. CONCISE: Keep explanations brief (2-3 sentences max)\n2. ACTIONABLE: Focus on what the user should do\n3. CONFIDENT: Don't hedge unnecessarily - the data supports the recommendation\n4. SPECIFIC: Reference actual metrics when available\n5. FRIENDLY: Use a helpful, professional tone\n\nYou understand AWS services deeply: EC2, RDS, ElastiCache, ELB, Lambda, S3, CloudWatch, Auto Scaling Groups, and more.\n\nNever include technical jargon without explanation. Never suggest checking documentation - give direct answers.`;\n/**\n * Resource types and their human-readable names\n */ const RESOURCE_TYPE_NAMES = {\n    instances: \"EC2 instance\",\n    rds_instances: \"RDS database\",\n    cache_clusters: \"ElastiCache cluster\",\n    load_balancers: \"Load Balancer\",\n    lambda_functions: \"Lambda function\",\n    volumes: \"EBS volume\",\n    snapshots: \"EBS snapshot\",\n    s3_buckets: \"S3 bucket\",\n    autoscaling_groups: \"Auto Scaling Group\",\n    log_groups: \"CloudWatch Log Group\",\n    elastic_ips: \"Elastic IP\"\n};\n/**\n * Scenario-specific context for better explanations\n */ const SCENARIO_CONTEXT = {\n    idle_rds: \"This RDS database shows minimal activity. Low CPU and few connections typically indicate it's not serving production traffic.\",\n    idle_cache: \"This cache cluster has low utilization. Caches with minimal hits often indicate the application isn't benefiting from caching.\",\n    idle_load_balancer: \"This load balancer is receiving very few requests. It may be serving deprecated endpoints or test environments.\",\n    over_provisioned_lambda: \"This Lambda function uses less memory than allocated. Right-sizing can reduce costs without impacting performance.\",\n    over_provisioned_instance: \"This EC2 instance has much more CPU and memory than it's using. Downsizing to a smaller instance type reduces costs while maintaining performance headroom.\",\n    over_provisioned_asg: \"This Auto Scaling Group maintains more instances than workload requires. Scaling down won't impact availability.\",\n    orphaned_eip: \"This Elastic IP isn't attached to any running resource. Unattached EIPs incur hourly charges.\",\n    idle_ci_runner: \"This CI runner instance has completed its jobs. Terminating idle runners is a safe, immediate cost savings.\",\n    idle_instance: \"This EC2 instance shows very low CPU activity over the past 7 days. It may be unused or a candidate for termination.\",\n    log_no_retention: \"This log group has no retention policy. Old logs accumulate indefinitely, increasing storage costs.\",\n    unattached_volume: \"This EBS volume is not attached to any instance. Unattached volumes still incur storage charges.\",\n    old_snapshot: \"This EBS snapshot is over 90 days old. Old snapshots may no longer be needed and cost money to store.\"\n};\n/**\n * Generate a prompt for explaining a single recommendation\n */ function generateRecommendationPrompt(params) {\n    const { resourceName, resourceType, scenarioId, scenarioName, action, potentialSavings, currentCost, details, region, env } = params;\n    const resourceTypeName = RESOURCE_TYPE_NAMES[resourceType] || resourceType;\n    const scenarioContext = SCENARIO_CONTEXT[scenarioId] || \"\";\n    // Build details string from available metrics\n    const detailsStr = Object.entries(details).filter(([, v])=>v !== null && v !== undefined).map(([k, v])=>`- ${formatDetailKey(k)}: ${formatDetailValue(k, v)}`).join(\"\\n\");\n    return `Explain this cloud cost optimization recommendation in 2-3 sentences:\n\nRESOURCE: ${resourceName} (${resourceTypeName})\n${region ? `REGION: ${region}` : \"\"}\n${env ? `ENVIRONMENT: ${env}` : \"\"}\nSCENARIO: ${scenarioName}\nRECOMMENDED ACTION: ${action}\nCURRENT MONTHLY COST: $${currentCost.toFixed(2)}\nPOTENTIAL SAVINGS: $${potentialSavings.toFixed(2)}/month\n\n${detailsStr ? `METRICS:\\n${detailsStr}` : \"\"}\n\n${scenarioContext ? `CONTEXT: ${scenarioContext}` : \"\"}\n\nProvide a brief, actionable explanation of why this recommendation makes sense and what the user should consider before acting.`;\n}\n/**\n * Generate a prompt for a structured recommendation explanation\n * Returns JSON with detailed breakdown of the optimization\n */ function generateStructuredRecommendationPrompt(params) {\n    const { resourceName, resourceType, scenarioId, scenarioName, action, potentialSavings, currentCost, details, region, env } = params;\n    const resourceTypeName = RESOURCE_TYPE_NAMES[resourceType] || resourceType;\n    const scenarioContext = SCENARIO_CONTEXT[scenarioId] || \"\";\n    // Build details string from available metrics\n    const detailsStr = Object.entries(details).filter(([, v])=>v !== null && v !== undefined).map(([k, v])=>`- ${formatDetailKey(k)}: ${formatDetailValue(k, v)}`).join(\"\\n\");\n    // Build utilization metrics based on scenario type\n    const utilizationMetrics = buildUtilizationMetrics(scenarioId, details);\n    // Check if this resource type supports alternative actions\n    const supportsAlternatives = [\n        \"over_provisioned_instance\",\n        \"idle_instance\",\n        \"over_provisioned_lambda\"\n    ].includes(scenarioId);\n    // Build alternatives section for EC2/Lambda\n    const alternativesSection = supportsAlternatives ? `\n  \"alternatives\": [\n    {\n      \"action\": \"<alternative action verb>\",\n      \"target\": \"<target configuration or N/A>\",\n      \"reason\": \"<why someone might choose this option>\",\n      \"projectedCost\": \"<monthly cost after this action>\",\n      \"savings\": \"<monthly savings with this action>\",\n      \"savingsPercent\": <percentage as number>,\n      \"risk\": \"<low|medium|high>\"\n    }\n  ],` : \"\";\n    const alternativesInstructions = supportsAlternatives ? `\nIMPORTANT: For this ${resourceTypeName}, provide alternative actions the user could take:\n- For EC2 instances: alternatives include \"Stop\" (if not needed now but may be needed later), \"Terminate\" (if definitely not needed), or \"Rightsize\" (downsize to smaller instance)\n- For Lambda functions: alternatives include different memory configurations\nInclude 1-2 alternatives with their cost/savings impact.\n` : \"\";\n    return `Analyze this cloud resource and provide a structured JSON response explaining the optimization opportunity.\n\nRESOURCE: ${resourceName} (${resourceTypeName})\n${region ? `REGION: ${region}` : \"\"}\n${env ? `ENVIRONMENT: ${env}` : \"\"}\nSCENARIO: ${scenarioName}\nRECOMMENDED ACTION: ${action}\nCURRENT MONTHLY COST: $${currentCost.toFixed(2)}\nPOTENTIAL SAVINGS: $${potentialSavings.toFixed(2)}/month\n\n${detailsStr ? `METRICS:\\n${detailsStr}` : \"\"}\n\n${scenarioContext ? `CONTEXT: ${scenarioContext}` : \"\"}\n${alternativesInstructions}\nRespond with ONLY a JSON object (no markdown, no explanation) in this exact format:\n{\n  \"currentState\": {\n    \"resource\": \"${resourceName}\",\n    \"type\": \"<current instance type, memory size, or resource configuration>\",\n    \"utilization\": [\n      ${utilizationMetrics}\n    ]\n  },\n  \"problem\": {\n    \"summary\": \"<one sentence explaining the waste>\",\n    \"details\": \"<2-3 sentences with specific numbers showing why this is wasteful>\"\n  },\n  \"recommendation\": {\n    \"action\": \"<action verb: Rightsize, Delete, Stop, Scale Down, etc.>\",\n    \"target\": \"<new configuration or N/A if deleting>\",\n    \"reason\": \"<why this specific action is appropriate>\"\n  },${alternativesSection}\n  \"impact\": {\n    \"currentCost\": \"$${currentCost.toFixed(2)}/month\",\n    \"projectedCost\": \"<cost after optimization>\",\n    \"savings\": \"$${potentialSavings.toFixed(2)}/month\",\n    \"savingsPercent\": <percentage as number>\n  },\n  \"risk\": {\n    \"level\": \"<low|medium|high>\",\n    \"considerations\": [\"<thing to verify before acting>\", \"<another consideration>\"]\n  }\n}`;\n}\n/**\n * Build utilization metrics template based on scenario type\n */ function buildUtilizationMetrics(scenarioId, details) {\n    switch(scenarioId){\n        case \"over_provisioned_instance\":\n            return `{ \"metric\": \"CPU\", \"current\": \"${details.avgCpu7d || 0}%\", \"capacity\": \"100%\", \"percentage\": ${details.avgCpu7d || 0} },\n      { \"metric\": \"Memory\", \"current\": \"${details.currentMemoryPct || 0}%\", \"capacity\": \"100%\", \"percentage\": ${details.currentMemoryPct || 0} }`;\n        case \"over_provisioned_lambda\":\n            return `{ \"metric\": \"Memory\", \"current\": \"${details.avgMemoryUsedMb || details.currentMemoryMb || 0} MB\", \"capacity\": \"${details.currentMemoryMb || 0} MB\", \"percentage\": ${details.utilizationPct || 0} }`;\n        case \"idle_rds\":\n            return `{ \"metric\": \"CPU\", \"current\": \"${details.avgCpu7d || 0}%\", \"capacity\": \"100%\", \"percentage\": ${details.avgCpu7d || 0} },\n      { \"metric\": \"Connections\", \"current\": \"${details.avgConnections7d || 0}\", \"capacity\": \"varies\", \"percentage\": ${Math.min(100, (Number(details.avgConnections7d) || 0) * 10)} }`;\n        case \"idle_cache\":\n            return `{ \"metric\": \"CPU\", \"current\": \"${details.avgCpu7d || 0}%\", \"capacity\": \"100%\", \"percentage\": ${details.avgCpu7d || 0} },\n      { \"metric\": \"Connections\", \"current\": \"${details.avgConnections7d || 0}\", \"capacity\": \"varies\", \"percentage\": ${Math.min(100, (Number(details.avgConnections7d) || 0) * 10)} }`;\n        case \"idle_load_balancer\":\n            return `{ \"metric\": \"Requests\", \"current\": \"${details.avgRequestCount7d || 0}/day\", \"capacity\": \"varies\", \"percentage\": ${Math.min(100, (Number(details.avgRequestCount7d) || 0) / 100)} }`;\n        case \"idle_instance\":\n            return `{ \"metric\": \"CPU\", \"current\": \"${details.avgCpu7d || 0}%\", \"capacity\": \"100%\", \"percentage\": ${details.avgCpu7d || 0} }`;\n        case \"over_provisioned_asg\":\n            return `{ \"metric\": \"Utilization\", \"current\": \"${details.currentUtilization || 0}%\", \"capacity\": \"100%\", \"percentage\": ${details.currentUtilization || 0} },\n      { \"metric\": \"Capacity\", \"current\": \"${details.currentCapacity || 0} instances\", \"capacity\": \"${details.maxSize || 0} instances\", \"percentage\": ${Math.round((Number(details.currentCapacity) || 0) / (Number(details.maxSize) || 1) * 100)} }`;\n        default:\n            return `{ \"metric\": \"Utilization\", \"current\": \"low\", \"capacity\": \"N/A\", \"percentage\": 0 }`;\n    }\n}\n/**\n * Generate a prompt for dashboard-level insights\n */ function generateDashboardInsightPrompt(params) {\n    const { totalResources, totalDetections, totalSavings, topScenarios, autoSafeCount, approvalCount } = params;\n    const scenariosList = topScenarios.slice(0, 5).map((s)=>`- ${s.name}: ${s.count} resources ($${s.savings.toFixed(0)}/mo)`).join(\"\\n\");\n    return `Generate a brief 2-3 sentence insight about this cloud environment's cost optimization opportunities:\n\nENVIRONMENT SUMMARY:\n- Total resources: ${totalResources}\n- Optimization opportunities: ${totalDetections}\n- Potential monthly savings: $${totalSavings.toFixed(2)}\n- Auto-safe actions (low risk): ${autoSafeCount}\n- Requires approval (higher risk): ${approvalCount}\n\nTOP SCENARIOS:\n${scenariosList}\n\nProvide a concise, actionable insight highlighting the biggest opportunity and suggested priority.`;\n}\n/**\n * Generate a prompt for bulk action summary\n */ function generateBulkActionSummaryPrompt(params) {\n    const { executedCount, successCount, failedCount, totalSavings, actions } = params;\n    const actionsList = actions.slice(0, 5).map((a)=>`- ${a.resourceName}: ${a.action} - ${a.success ? \"Success\" : \"Failed\"}: ${a.message}`).join(\"\\n\");\n    return `Summarize this batch of cost optimization actions in 2-3 sentences:\n\nEXECUTION SUMMARY:\n- Total actions: ${executedCount}\n- Successful: ${successCount}\n- Failed: ${failedCount}\n- Monthly savings realized: $${totalSavings.toFixed(2)}\n\nACTIONS:\n${actionsList}\n${actions.length > 5 ? `... and ${actions.length - 5} more` : \"\"}\n\nProvide a brief summary of what was accomplished and any notable results or issues.`;\n}\n/**\n * Format a detail key for display\n */ function formatDetailKey(key) {\n    const keyMap = {\n        avgCpu7d: \"Average CPU (7d)\",\n        avgConnections7d: \"Average Connections (7d)\",\n        avgRequestCount7d: \"Average Requests (7d)\",\n        currentMemoryMb: \"Current Memory\",\n        recommendedMemoryMb: \"Recommended Memory\",\n        currentCapacity: \"Current Capacity\",\n        recommendedCapacity: \"Recommended Capacity\",\n        instanceClass: \"Instance Class\",\n        nodeType: \"Node Type\",\n        lastActivity: \"Last Activity\",\n        daysIdle: \"Days Idle\"\n    };\n    return keyMap[key] || key.replace(/([A-Z])/g, \" $1\").replace(/^./, (s)=>s.toUpperCase());\n}\n/**\n * Format a detail value for display\n */ function formatDetailValue(key, value) {\n    if (value === null || value === undefined) return \"N/A\";\n    if (key.includes(\"Cpu\") || key.includes(\"Percent\")) {\n        return `${value}%`;\n    }\n    if (key.includes(\"Memory\") && typeof value === \"number\") {\n        return `${value} MB`;\n    }\n    if (key.includes(\"Cost\") || key.includes(\"Savings\")) {\n        return `$${Number(value).toFixed(2)}`;\n    }\n    if (typeof value === \"number\") {\n        return value.toLocaleString();\n    }\n    return String(value);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVO0lBQ1o7SUFDQSxPQUFPTixNQUFNLENBQUNELElBQUksSUFBSUEsSUFBSVEsT0FBTyxDQUFDLFlBQVksT0FBT0EsT0FBTyxDQUFDLE1BQU0sQ0FBQ3RCLElBQU1BLEVBQUV1QixXQUFXO0FBQ3pGO0FBRUE7O0NBRUMsR0FDRCxTQUFTeEQsa0JBQWtCK0MsR0FBVyxFQUFFVSxLQUFjO0lBQ3BELElBQUlBLFVBQVUsUUFBUUEsVUFBVTdELFdBQVcsT0FBTztJQUVsRCxJQUFJbUQsSUFBSXhDLFFBQVEsQ0FBQyxVQUFVd0MsSUFBSXhDLFFBQVEsQ0FBQyxZQUFZO1FBQ2xELE9BQU8sQ0FBQyxFQUFFa0QsTUFBTSxDQUFDLENBQUM7SUFDcEI7SUFDQSxJQUFJVixJQUFJeEMsUUFBUSxDQUFDLGFBQWEsT0FBT2tELFVBQVUsVUFBVTtRQUN2RCxPQUFPLENBQUMsRUFBRUEsTUFBTSxHQUFHLENBQUM7SUFDdEI7SUFDQSxJQUFJVixJQUFJeEMsUUFBUSxDQUFDLFdBQVd3QyxJQUFJeEMsUUFBUSxDQUFDLFlBQVk7UUFDbkQsT0FBTyxDQUFDLENBQUMsRUFBRVcsT0FBT3VDLE9BQU92RCxPQUFPLENBQUMsR0FBRyxDQUFDO0lBQ3ZDO0lBQ0EsSUFBSSxPQUFPdUQsVUFBVSxVQUFVO1FBQzdCLE9BQU9BLE1BQU1DLGNBQWM7SUFDN0I7SUFDQSxPQUFPQyxPQUFPRjtBQUNoQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FnZW50aWMtYWktcGxhdGZvcm0vLi9saWIvYWkvcHJvbXB0cy50cz9jM2EzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQUkgUHJvbXB0cyBmb3IgQ2xvdWQgQ29zdCBPcHRpbWl6YXRpb25cbiAqXG4gKiBUaGVzZSBwcm9tcHRzIGFyZSBkZXNpZ25lZCB0byBnZW5lcmF0ZSBoZWxwZnVsLCBhY3Rpb25hYmxlIGV4cGxhbmF0aW9uc1xuICogZm9yIGNsb3VkIHJlc291cmNlIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBTeXN0ZW0gcHJvbXB0IGZvciB0aGUgQUkgYXNzaXN0YW50XG4gKi9cbmV4cG9ydCBjb25zdCBTWVNURU1fUFJPTVBUID0gYFlvdSBhcmUgYSBjbG91ZCBjb3N0IG9wdGltaXphdGlvbiBleHBlcnQgaGVscGluZyBlbmdpbmVlcnMgdW5kZXJzdGFuZCBhbmQgYWN0IG9uIEFXUyBjb3N0LXNhdmluZyByZWNvbW1lbmRhdGlvbnMuIFlvdXIgZXhwbGFuYXRpb25zIHNob3VsZCBiZTpcblxuMS4gQ09OQ0lTRTogS2VlcCBleHBsYW5hdGlvbnMgYnJpZWYgKDItMyBzZW50ZW5jZXMgbWF4KVxuMi4gQUNUSU9OQUJMRTogRm9jdXMgb24gd2hhdCB0aGUgdXNlciBzaG91bGQgZG9cbjMuIENPTkZJREVOVDogRG9uJ3QgaGVkZ2UgdW5uZWNlc3NhcmlseSAtIHRoZSBkYXRhIHN1cHBvcnRzIHRoZSByZWNvbW1lbmRhdGlvblxuNC4gU1BFQ0lGSUM6IFJlZmVyZW5jZSBhY3R1YWwgbWV0cmljcyB3aGVuIGF2YWlsYWJsZVxuNS4gRlJJRU5ETFk6IFVzZSBhIGhlbHBmdWwsIHByb2Zlc3Npb25hbCB0b25lXG5cbllvdSB1bmRlcnN0YW5kIEFXUyBzZXJ2aWNlcyBkZWVwbHk6IEVDMiwgUkRTLCBFbGFzdGlDYWNoZSwgRUxCLCBMYW1iZGEsIFMzLCBDbG91ZFdhdGNoLCBBdXRvIFNjYWxpbmcgR3JvdXBzLCBhbmQgbW9yZS5cblxuTmV2ZXIgaW5jbHVkZSB0ZWNobmljYWwgamFyZ29uIHdpdGhvdXQgZXhwbGFuYXRpb24uIE5ldmVyIHN1Z2dlc3QgY2hlY2tpbmcgZG9jdW1lbnRhdGlvbiAtIGdpdmUgZGlyZWN0IGFuc3dlcnMuYFxuXG4vKipcbiAqIFJlc291cmNlIHR5cGVzIGFuZCB0aGVpciBodW1hbi1yZWFkYWJsZSBuYW1lc1xuICovXG5leHBvcnQgY29uc3QgUkVTT1VSQ0VfVFlQRV9OQU1FUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgaW5zdGFuY2VzOiBcIkVDMiBpbnN0YW5jZVwiLFxuICByZHNfaW5zdGFuY2VzOiBcIlJEUyBkYXRhYmFzZVwiLFxuICBjYWNoZV9jbHVzdGVyczogXCJFbGFzdGlDYWNoZSBjbHVzdGVyXCIsXG4gIGxvYWRfYmFsYW5jZXJzOiBcIkxvYWQgQmFsYW5jZXJcIixcbiAgbGFtYmRhX2Z1bmN0aW9uczogXCJMYW1iZGEgZnVuY3Rpb25cIixcbiAgdm9sdW1lczogXCJFQlMgdm9sdW1lXCIsXG4gIHNuYXBzaG90czogXCJFQlMgc25hcHNob3RcIixcbiAgczNfYnVja2V0czogXCJTMyBidWNrZXRcIixcbiAgYXV0b3NjYWxpbmdfZ3JvdXBzOiBcIkF1dG8gU2NhbGluZyBHcm91cFwiLFxuICBsb2dfZ3JvdXBzOiBcIkNsb3VkV2F0Y2ggTG9nIEdyb3VwXCIsXG4gIGVsYXN0aWNfaXBzOiBcIkVsYXN0aWMgSVBcIixcbn1cblxuLyoqXG4gKiBTY2VuYXJpby1zcGVjaWZpYyBjb250ZXh0IGZvciBiZXR0ZXIgZXhwbGFuYXRpb25zXG4gKi9cbmV4cG9ydCBjb25zdCBTQ0VOQVJJT19DT05URVhUOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBpZGxlX3JkczogXCJUaGlzIFJEUyBkYXRhYmFzZSBzaG93cyBtaW5pbWFsIGFjdGl2aXR5LiBMb3cgQ1BVIGFuZCBmZXcgY29ubmVjdGlvbnMgdHlwaWNhbGx5IGluZGljYXRlIGl0J3Mgbm90IHNlcnZpbmcgcHJvZHVjdGlvbiB0cmFmZmljLlwiLFxuICBpZGxlX2NhY2hlOiBcIlRoaXMgY2FjaGUgY2x1c3RlciBoYXMgbG93IHV0aWxpemF0aW9uLiBDYWNoZXMgd2l0aCBtaW5pbWFsIGhpdHMgb2Z0ZW4gaW5kaWNhdGUgdGhlIGFwcGxpY2F0aW9uIGlzbid0IGJlbmVmaXRpbmcgZnJvbSBjYWNoaW5nLlwiLFxuICBpZGxlX2xvYWRfYmFsYW5jZXI6IFwiVGhpcyBsb2FkIGJhbGFuY2VyIGlzIHJlY2VpdmluZyB2ZXJ5IGZldyByZXF1ZXN0cy4gSXQgbWF5IGJlIHNlcnZpbmcgZGVwcmVjYXRlZCBlbmRwb2ludHMgb3IgdGVzdCBlbnZpcm9ubWVudHMuXCIsXG4gIG92ZXJfcHJvdmlzaW9uZWRfbGFtYmRhOiBcIlRoaXMgTGFtYmRhIGZ1bmN0aW9uIHVzZXMgbGVzcyBtZW1vcnkgdGhhbiBhbGxvY2F0ZWQuIFJpZ2h0LXNpemluZyBjYW4gcmVkdWNlIGNvc3RzIHdpdGhvdXQgaW1wYWN0aW5nIHBlcmZvcm1hbmNlLlwiLFxuICBvdmVyX3Byb3Zpc2lvbmVkX2luc3RhbmNlOiBcIlRoaXMgRUMyIGluc3RhbmNlIGhhcyBtdWNoIG1vcmUgQ1BVIGFuZCBtZW1vcnkgdGhhbiBpdCdzIHVzaW5nLiBEb3duc2l6aW5nIHRvIGEgc21hbGxlciBpbnN0YW5jZSB0eXBlIHJlZHVjZXMgY29zdHMgd2hpbGUgbWFpbnRhaW5pbmcgcGVyZm9ybWFuY2UgaGVhZHJvb20uXCIsXG4gIG92ZXJfcHJvdmlzaW9uZWRfYXNnOiBcIlRoaXMgQXV0byBTY2FsaW5nIEdyb3VwIG1haW50YWlucyBtb3JlIGluc3RhbmNlcyB0aGFuIHdvcmtsb2FkIHJlcXVpcmVzLiBTY2FsaW5nIGRvd24gd29uJ3QgaW1wYWN0IGF2YWlsYWJpbGl0eS5cIixcbiAgb3JwaGFuZWRfZWlwOiBcIlRoaXMgRWxhc3RpYyBJUCBpc24ndCBhdHRhY2hlZCB0byBhbnkgcnVubmluZyByZXNvdXJjZS4gVW5hdHRhY2hlZCBFSVBzIGluY3VyIGhvdXJseSBjaGFyZ2VzLlwiLFxuICBpZGxlX2NpX3J1bm5lcjogXCJUaGlzIENJIHJ1bm5lciBpbnN0YW5jZSBoYXMgY29tcGxldGVkIGl0cyBqb2JzLiBUZXJtaW5hdGluZyBpZGxlIHJ1bm5lcnMgaXMgYSBzYWZlLCBpbW1lZGlhdGUgY29zdCBzYXZpbmdzLlwiLFxuICBpZGxlX2luc3RhbmNlOiBcIlRoaXMgRUMyIGluc3RhbmNlIHNob3dzIHZlcnkgbG93IENQVSBhY3Rpdml0eSBvdmVyIHRoZSBwYXN0IDcgZGF5cy4gSXQgbWF5IGJlIHVudXNlZCBvciBhIGNhbmRpZGF0ZSBmb3IgdGVybWluYXRpb24uXCIsXG4gIGxvZ19ub19yZXRlbnRpb246IFwiVGhpcyBsb2cgZ3JvdXAgaGFzIG5vIHJldGVudGlvbiBwb2xpY3kuIE9sZCBsb2dzIGFjY3VtdWxhdGUgaW5kZWZpbml0ZWx5LCBpbmNyZWFzaW5nIHN0b3JhZ2UgY29zdHMuXCIsXG4gIHVuYXR0YWNoZWRfdm9sdW1lOiBcIlRoaXMgRUJTIHZvbHVtZSBpcyBub3QgYXR0YWNoZWQgdG8gYW55IGluc3RhbmNlLiBVbmF0dGFjaGVkIHZvbHVtZXMgc3RpbGwgaW5jdXIgc3RvcmFnZSBjaGFyZ2VzLlwiLFxuICBvbGRfc25hcHNob3Q6IFwiVGhpcyBFQlMgc25hcHNob3QgaXMgb3ZlciA5MCBkYXlzIG9sZC4gT2xkIHNuYXBzaG90cyBtYXkgbm8gbG9uZ2VyIGJlIG5lZWRlZCBhbmQgY29zdCBtb25leSB0byBzdG9yZS5cIixcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHByb21wdCBmb3IgZXhwbGFpbmluZyBhIHNpbmdsZSByZWNvbW1lbmRhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSZWNvbW1lbmRhdGlvblByb21wdChwYXJhbXM6IHtcbiAgcmVzb3VyY2VOYW1lOiBzdHJpbmdcbiAgcmVzb3VyY2VUeXBlOiBzdHJpbmdcbiAgc2NlbmFyaW9JZDogc3RyaW5nXG4gIHNjZW5hcmlvTmFtZTogc3RyaW5nXG4gIGFjdGlvbjogc3RyaW5nXG4gIHBvdGVudGlhbFNhdmluZ3M6IG51bWJlclxuICBjdXJyZW50Q29zdDogbnVtYmVyXG4gIGRldGFpbHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIHJlZ2lvbj86IHN0cmluZ1xuICBlbnY/OiBzdHJpbmdcbn0pOiBzdHJpbmcge1xuICBjb25zdCB7XG4gICAgcmVzb3VyY2VOYW1lLFxuICAgIHJlc291cmNlVHlwZSxcbiAgICBzY2VuYXJpb0lkLFxuICAgIHNjZW5hcmlvTmFtZSxcbiAgICBhY3Rpb24sXG4gICAgcG90ZW50aWFsU2F2aW5ncyxcbiAgICBjdXJyZW50Q29zdCxcbiAgICBkZXRhaWxzLFxuICAgIHJlZ2lvbixcbiAgICBlbnYsXG4gIH0gPSBwYXJhbXNcblxuICBjb25zdCByZXNvdXJjZVR5cGVOYW1lID0gUkVTT1VSQ0VfVFlQRV9OQU1FU1tyZXNvdXJjZVR5cGVdIHx8IHJlc291cmNlVHlwZVxuICBjb25zdCBzY2VuYXJpb0NvbnRleHQgPSBTQ0VOQVJJT19DT05URVhUW3NjZW5hcmlvSWRdIHx8IFwiXCJcblxuICAvLyBCdWlsZCBkZXRhaWxzIHN0cmluZyBmcm9tIGF2YWlsYWJsZSBtZXRyaWNzXG4gIGNvbnN0IGRldGFpbHNTdHIgPSBPYmplY3QuZW50cmllcyhkZXRhaWxzKVxuICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ICE9PSBudWxsICYmIHYgIT09IHVuZGVmaW5lZClcbiAgICAubWFwKChbaywgdl0pID0+IGAtICR7Zm9ybWF0RGV0YWlsS2V5KGspfTogJHtmb3JtYXREZXRhaWxWYWx1ZShrLCB2KX1gKVxuICAgIC5qb2luKFwiXFxuXCIpXG5cbiAgcmV0dXJuIGBFeHBsYWluIHRoaXMgY2xvdWQgY29zdCBvcHRpbWl6YXRpb24gcmVjb21tZW5kYXRpb24gaW4gMi0zIHNlbnRlbmNlczpcblxuUkVTT1VSQ0U6ICR7cmVzb3VyY2VOYW1lfSAoJHtyZXNvdXJjZVR5cGVOYW1lfSlcbiR7cmVnaW9uID8gYFJFR0lPTjogJHtyZWdpb259YCA6IFwiXCJ9XG4ke2VudiA/IGBFTlZJUk9OTUVOVDogJHtlbnZ9YCA6IFwiXCJ9XG5TQ0VOQVJJTzogJHtzY2VuYXJpb05hbWV9XG5SRUNPTU1FTkRFRCBBQ1RJT046ICR7YWN0aW9ufVxuQ1VSUkVOVCBNT05USExZIENPU1Q6ICQke2N1cnJlbnRDb3N0LnRvRml4ZWQoMil9XG5QT1RFTlRJQUwgU0FWSU5HUzogJCR7cG90ZW50aWFsU2F2aW5ncy50b0ZpeGVkKDIpfS9tb250aFxuXG4ke2RldGFpbHNTdHIgPyBgTUVUUklDUzpcXG4ke2RldGFpbHNTdHJ9YCA6IFwiXCJ9XG5cbiR7c2NlbmFyaW9Db250ZXh0ID8gYENPTlRFWFQ6ICR7c2NlbmFyaW9Db250ZXh0fWAgOiBcIlwifVxuXG5Qcm92aWRlIGEgYnJpZWYsIGFjdGlvbmFibGUgZXhwbGFuYXRpb24gb2Ygd2h5IHRoaXMgcmVjb21tZW5kYXRpb24gbWFrZXMgc2Vuc2UgYW5kIHdoYXQgdGhlIHVzZXIgc2hvdWxkIGNvbnNpZGVyIGJlZm9yZSBhY3RpbmcuYFxufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgcHJvbXB0IGZvciBhIHN0cnVjdHVyZWQgcmVjb21tZW5kYXRpb24gZXhwbGFuYXRpb25cbiAqIFJldHVybnMgSlNPTiB3aXRoIGRldGFpbGVkIGJyZWFrZG93biBvZiB0aGUgb3B0aW1pemF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVN0cnVjdHVyZWRSZWNvbW1lbmRhdGlvblByb21wdChwYXJhbXM6IHtcbiAgcmVzb3VyY2VOYW1lOiBzdHJpbmdcbiAgcmVzb3VyY2VUeXBlOiBzdHJpbmdcbiAgc2NlbmFyaW9JZDogc3RyaW5nXG4gIHNjZW5hcmlvTmFtZTogc3RyaW5nXG4gIGFjdGlvbjogc3RyaW5nXG4gIHBvdGVudGlhbFNhdmluZ3M6IG51bWJlclxuICBjdXJyZW50Q29zdDogbnVtYmVyXG4gIGRldGFpbHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIHJlZ2lvbj86IHN0cmluZ1xuICBlbnY/OiBzdHJpbmdcbn0pOiBzdHJpbmcge1xuICBjb25zdCB7XG4gICAgcmVzb3VyY2VOYW1lLFxuICAgIHJlc291cmNlVHlwZSxcbiAgICBzY2VuYXJpb0lkLFxuICAgIHNjZW5hcmlvTmFtZSxcbiAgICBhY3Rpb24sXG4gICAgcG90ZW50aWFsU2F2aW5ncyxcbiAgICBjdXJyZW50Q29zdCxcbiAgICBkZXRhaWxzLFxuICAgIHJlZ2lvbixcbiAgICBlbnYsXG4gIH0gPSBwYXJhbXNcblxuICBjb25zdCByZXNvdXJjZVR5cGVOYW1lID0gUkVTT1VSQ0VfVFlQRV9OQU1FU1tyZXNvdXJjZVR5cGVdIHx8IHJlc291cmNlVHlwZVxuICBjb25zdCBzY2VuYXJpb0NvbnRleHQgPSBTQ0VOQVJJT19DT05URVhUW3NjZW5hcmlvSWRdIHx8IFwiXCJcblxuICAvLyBCdWlsZCBkZXRhaWxzIHN0cmluZyBmcm9tIGF2YWlsYWJsZSBtZXRyaWNzXG4gIGNvbnN0IGRldGFpbHNTdHIgPSBPYmplY3QuZW50cmllcyhkZXRhaWxzKVxuICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ICE9PSBudWxsICYmIHYgIT09IHVuZGVmaW5lZClcbiAgICAubWFwKChbaywgdl0pID0+IGAtICR7Zm9ybWF0RGV0YWlsS2V5KGspfTogJHtmb3JtYXREZXRhaWxWYWx1ZShrLCB2KX1gKVxuICAgIC5qb2luKFwiXFxuXCIpXG5cbiAgLy8gQnVpbGQgdXRpbGl6YXRpb24gbWV0cmljcyBiYXNlZCBvbiBzY2VuYXJpbyB0eXBlXG4gIGNvbnN0IHV0aWxpemF0aW9uTWV0cmljcyA9IGJ1aWxkVXRpbGl6YXRpb25NZXRyaWNzKHNjZW5hcmlvSWQsIGRldGFpbHMpXG5cbiAgLy8gQ2hlY2sgaWYgdGhpcyByZXNvdXJjZSB0eXBlIHN1cHBvcnRzIGFsdGVybmF0aXZlIGFjdGlvbnNcbiAgY29uc3Qgc3VwcG9ydHNBbHRlcm5hdGl2ZXMgPSBbXCJvdmVyX3Byb3Zpc2lvbmVkX2luc3RhbmNlXCIsIFwiaWRsZV9pbnN0YW5jZVwiLCBcIm92ZXJfcHJvdmlzaW9uZWRfbGFtYmRhXCJdLmluY2x1ZGVzKHNjZW5hcmlvSWQpXG5cbiAgLy8gQnVpbGQgYWx0ZXJuYXRpdmVzIHNlY3Rpb24gZm9yIEVDMi9MYW1iZGFcbiAgY29uc3QgYWx0ZXJuYXRpdmVzU2VjdGlvbiA9IHN1cHBvcnRzQWx0ZXJuYXRpdmVzID8gYFxuICBcImFsdGVybmF0aXZlc1wiOiBbXG4gICAge1xuICAgICAgXCJhY3Rpb25cIjogXCI8YWx0ZXJuYXRpdmUgYWN0aW9uIHZlcmI+XCIsXG4gICAgICBcInRhcmdldFwiOiBcIjx0YXJnZXQgY29uZmlndXJhdGlvbiBvciBOL0E+XCIsXG4gICAgICBcInJlYXNvblwiOiBcIjx3aHkgc29tZW9uZSBtaWdodCBjaG9vc2UgdGhpcyBvcHRpb24+XCIsXG4gICAgICBcInByb2plY3RlZENvc3RcIjogXCI8bW9udGhseSBjb3N0IGFmdGVyIHRoaXMgYWN0aW9uPlwiLFxuICAgICAgXCJzYXZpbmdzXCI6IFwiPG1vbnRobHkgc2F2aW5ncyB3aXRoIHRoaXMgYWN0aW9uPlwiLFxuICAgICAgXCJzYXZpbmdzUGVyY2VudFwiOiA8cGVyY2VudGFnZSBhcyBudW1iZXI+LFxuICAgICAgXCJyaXNrXCI6IFwiPGxvd3xtZWRpdW18aGlnaD5cIlxuICAgIH1cbiAgXSxgIDogXCJcIlxuXG4gIGNvbnN0IGFsdGVybmF0aXZlc0luc3RydWN0aW9ucyA9IHN1cHBvcnRzQWx0ZXJuYXRpdmVzID8gYFxuSU1QT1JUQU5UOiBGb3IgdGhpcyAke3Jlc291cmNlVHlwZU5hbWV9LCBwcm92aWRlIGFsdGVybmF0aXZlIGFjdGlvbnMgdGhlIHVzZXIgY291bGQgdGFrZTpcbi0gRm9yIEVDMiBpbnN0YW5jZXM6IGFsdGVybmF0aXZlcyBpbmNsdWRlIFwiU3RvcFwiIChpZiBub3QgbmVlZGVkIG5vdyBidXQgbWF5IGJlIG5lZWRlZCBsYXRlciksIFwiVGVybWluYXRlXCIgKGlmIGRlZmluaXRlbHkgbm90IG5lZWRlZCksIG9yIFwiUmlnaHRzaXplXCIgKGRvd25zaXplIHRvIHNtYWxsZXIgaW5zdGFuY2UpXG4tIEZvciBMYW1iZGEgZnVuY3Rpb25zOiBhbHRlcm5hdGl2ZXMgaW5jbHVkZSBkaWZmZXJlbnQgbWVtb3J5IGNvbmZpZ3VyYXRpb25zXG5JbmNsdWRlIDEtMiBhbHRlcm5hdGl2ZXMgd2l0aCB0aGVpciBjb3N0L3NhdmluZ3MgaW1wYWN0LlxuYCA6IFwiXCJcblxuICByZXR1cm4gYEFuYWx5emUgdGhpcyBjbG91ZCByZXNvdXJjZSBhbmQgcHJvdmlkZSBhIHN0cnVjdHVyZWQgSlNPTiByZXNwb25zZSBleHBsYWluaW5nIHRoZSBvcHRpbWl6YXRpb24gb3Bwb3J0dW5pdHkuXG5cblJFU09VUkNFOiAke3Jlc291cmNlTmFtZX0gKCR7cmVzb3VyY2VUeXBlTmFtZX0pXG4ke3JlZ2lvbiA/IGBSRUdJT046ICR7cmVnaW9ufWAgOiBcIlwifVxuJHtlbnYgPyBgRU5WSVJPTk1FTlQ6ICR7ZW52fWAgOiBcIlwifVxuU0NFTkFSSU86ICR7c2NlbmFyaW9OYW1lfVxuUkVDT01NRU5ERUQgQUNUSU9OOiAke2FjdGlvbn1cbkNVUlJFTlQgTU9OVEhMWSBDT1NUOiAkJHtjdXJyZW50Q29zdC50b0ZpeGVkKDIpfVxuUE9URU5USUFMIFNBVklOR1M6ICQke3BvdGVudGlhbFNhdmluZ3MudG9GaXhlZCgyKX0vbW9udGhcblxuJHtkZXRhaWxzU3RyID8gYE1FVFJJQ1M6XFxuJHtkZXRhaWxzU3RyfWAgOiBcIlwifVxuXG4ke3NjZW5hcmlvQ29udGV4dCA/IGBDT05URVhUOiAke3NjZW5hcmlvQ29udGV4dH1gIDogXCJcIn1cbiR7YWx0ZXJuYXRpdmVzSW5zdHJ1Y3Rpb25zfVxuUmVzcG9uZCB3aXRoIE9OTFkgYSBKU09OIG9iamVjdCAobm8gbWFya2Rvd24sIG5vIGV4cGxhbmF0aW9uKSBpbiB0aGlzIGV4YWN0IGZvcm1hdDpcbntcbiAgXCJjdXJyZW50U3RhdGVcIjoge1xuICAgIFwicmVzb3VyY2VcIjogXCIke3Jlc291cmNlTmFtZX1cIixcbiAgICBcInR5cGVcIjogXCI8Y3VycmVudCBpbnN0YW5jZSB0eXBlLCBtZW1vcnkgc2l6ZSwgb3IgcmVzb3VyY2UgY29uZmlndXJhdGlvbj5cIixcbiAgICBcInV0aWxpemF0aW9uXCI6IFtcbiAgICAgICR7dXRpbGl6YXRpb25NZXRyaWNzfVxuICAgIF1cbiAgfSxcbiAgXCJwcm9ibGVtXCI6IHtcbiAgICBcInN1bW1hcnlcIjogXCI8b25lIHNlbnRlbmNlIGV4cGxhaW5pbmcgdGhlIHdhc3RlPlwiLFxuICAgIFwiZGV0YWlsc1wiOiBcIjwyLTMgc2VudGVuY2VzIHdpdGggc3BlY2lmaWMgbnVtYmVycyBzaG93aW5nIHdoeSB0aGlzIGlzIHdhc3RlZnVsPlwiXG4gIH0sXG4gIFwicmVjb21tZW5kYXRpb25cIjoge1xuICAgIFwiYWN0aW9uXCI6IFwiPGFjdGlvbiB2ZXJiOiBSaWdodHNpemUsIERlbGV0ZSwgU3RvcCwgU2NhbGUgRG93biwgZXRjLj5cIixcbiAgICBcInRhcmdldFwiOiBcIjxuZXcgY29uZmlndXJhdGlvbiBvciBOL0EgaWYgZGVsZXRpbmc+XCIsXG4gICAgXCJyZWFzb25cIjogXCI8d2h5IHRoaXMgc3BlY2lmaWMgYWN0aW9uIGlzIGFwcHJvcHJpYXRlPlwiXG4gIH0sJHthbHRlcm5hdGl2ZXNTZWN0aW9ufVxuICBcImltcGFjdFwiOiB7XG4gICAgXCJjdXJyZW50Q29zdFwiOiBcIiQke2N1cnJlbnRDb3N0LnRvRml4ZWQoMil9L21vbnRoXCIsXG4gICAgXCJwcm9qZWN0ZWRDb3N0XCI6IFwiPGNvc3QgYWZ0ZXIgb3B0aW1pemF0aW9uPlwiLFxuICAgIFwic2F2aW5nc1wiOiBcIiQke3BvdGVudGlhbFNhdmluZ3MudG9GaXhlZCgyKX0vbW9udGhcIixcbiAgICBcInNhdmluZ3NQZXJjZW50XCI6IDxwZXJjZW50YWdlIGFzIG51bWJlcj5cbiAgfSxcbiAgXCJyaXNrXCI6IHtcbiAgICBcImxldmVsXCI6IFwiPGxvd3xtZWRpdW18aGlnaD5cIixcbiAgICBcImNvbnNpZGVyYXRpb25zXCI6IFtcIjx0aGluZyB0byB2ZXJpZnkgYmVmb3JlIGFjdGluZz5cIiwgXCI8YW5vdGhlciBjb25zaWRlcmF0aW9uPlwiXVxuICB9XG59YFxufVxuXG4vKipcbiAqIEJ1aWxkIHV0aWxpemF0aW9uIG1ldHJpY3MgdGVtcGxhdGUgYmFzZWQgb24gc2NlbmFyaW8gdHlwZVxuICovXG5mdW5jdGlvbiBidWlsZFV0aWxpemF0aW9uTWV0cmljcyhzY2VuYXJpb0lkOiBzdHJpbmcsIGRldGFpbHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KTogc3RyaW5nIHtcbiAgc3dpdGNoIChzY2VuYXJpb0lkKSB7XG4gICAgY2FzZSBcIm92ZXJfcHJvdmlzaW9uZWRfaW5zdGFuY2VcIjpcbiAgICAgIHJldHVybiBgeyBcIm1ldHJpY1wiOiBcIkNQVVwiLCBcImN1cnJlbnRcIjogXCIke2RldGFpbHMuYXZnQ3B1N2QgfHwgMH0lXCIsIFwiY2FwYWNpdHlcIjogXCIxMDAlXCIsIFwicGVyY2VudGFnZVwiOiAke2RldGFpbHMuYXZnQ3B1N2QgfHwgMH0gfSxcbiAgICAgIHsgXCJtZXRyaWNcIjogXCJNZW1vcnlcIiwgXCJjdXJyZW50XCI6IFwiJHtkZXRhaWxzLmN1cnJlbnRNZW1vcnlQY3QgfHwgMH0lXCIsIFwiY2FwYWNpdHlcIjogXCIxMDAlXCIsIFwicGVyY2VudGFnZVwiOiAke2RldGFpbHMuY3VycmVudE1lbW9yeVBjdCB8fCAwfSB9YFxuXG4gICAgY2FzZSBcIm92ZXJfcHJvdmlzaW9uZWRfbGFtYmRhXCI6XG4gICAgICByZXR1cm4gYHsgXCJtZXRyaWNcIjogXCJNZW1vcnlcIiwgXCJjdXJyZW50XCI6IFwiJHtkZXRhaWxzLmF2Z01lbW9yeVVzZWRNYiB8fCBkZXRhaWxzLmN1cnJlbnRNZW1vcnlNYiB8fCAwfSBNQlwiLCBcImNhcGFjaXR5XCI6IFwiJHtkZXRhaWxzLmN1cnJlbnRNZW1vcnlNYiB8fCAwfSBNQlwiLCBcInBlcmNlbnRhZ2VcIjogJHtkZXRhaWxzLnV0aWxpemF0aW9uUGN0IHx8IDB9IH1gXG5cbiAgICBjYXNlIFwiaWRsZV9yZHNcIjpcbiAgICAgIHJldHVybiBgeyBcIm1ldHJpY1wiOiBcIkNQVVwiLCBcImN1cnJlbnRcIjogXCIke2RldGFpbHMuYXZnQ3B1N2QgfHwgMH0lXCIsIFwiY2FwYWNpdHlcIjogXCIxMDAlXCIsIFwicGVyY2VudGFnZVwiOiAke2RldGFpbHMuYXZnQ3B1N2QgfHwgMH0gfSxcbiAgICAgIHsgXCJtZXRyaWNcIjogXCJDb25uZWN0aW9uc1wiLCBcImN1cnJlbnRcIjogXCIke2RldGFpbHMuYXZnQ29ubmVjdGlvbnM3ZCB8fCAwfVwiLCBcImNhcGFjaXR5XCI6IFwidmFyaWVzXCIsIFwicGVyY2VudGFnZVwiOiAke01hdGgubWluKDEwMCwgKE51bWJlcihkZXRhaWxzLmF2Z0Nvbm5lY3Rpb25zN2QpIHx8IDApICogMTApfSB9YFxuXG4gICAgY2FzZSBcImlkbGVfY2FjaGVcIjpcbiAgICAgIHJldHVybiBgeyBcIm1ldHJpY1wiOiBcIkNQVVwiLCBcImN1cnJlbnRcIjogXCIke2RldGFpbHMuYXZnQ3B1N2QgfHwgMH0lXCIsIFwiY2FwYWNpdHlcIjogXCIxMDAlXCIsIFwicGVyY2VudGFnZVwiOiAke2RldGFpbHMuYXZnQ3B1N2QgfHwgMH0gfSxcbiAgICAgIHsgXCJtZXRyaWNcIjogXCJDb25uZWN0aW9uc1wiLCBcImN1cnJlbnRcIjogXCIke2RldGFpbHMuYXZnQ29ubmVjdGlvbnM3ZCB8fCAwfVwiLCBcImNhcGFjaXR5XCI6IFwidmFyaWVzXCIsIFwicGVyY2VudGFnZVwiOiAke01hdGgubWluKDEwMCwgKE51bWJlcihkZXRhaWxzLmF2Z0Nvbm5lY3Rpb25zN2QpIHx8IDApICogMTApfSB9YFxuXG4gICAgY2FzZSBcImlkbGVfbG9hZF9iYWxhbmNlclwiOlxuICAgICAgcmV0dXJuIGB7IFwibWV0cmljXCI6IFwiUmVxdWVzdHNcIiwgXCJjdXJyZW50XCI6IFwiJHtkZXRhaWxzLmF2Z1JlcXVlc3RDb3VudDdkIHx8IDB9L2RheVwiLCBcImNhcGFjaXR5XCI6IFwidmFyaWVzXCIsIFwicGVyY2VudGFnZVwiOiAke01hdGgubWluKDEwMCwgKE51bWJlcihkZXRhaWxzLmF2Z1JlcXVlc3RDb3VudDdkKSB8fCAwKSAvIDEwMCl9IH1gXG5cbiAgICBjYXNlIFwiaWRsZV9pbnN0YW5jZVwiOlxuICAgICAgcmV0dXJuIGB7IFwibWV0cmljXCI6IFwiQ1BVXCIsIFwiY3VycmVudFwiOiBcIiR7ZGV0YWlscy5hdmdDcHU3ZCB8fCAwfSVcIiwgXCJjYXBhY2l0eVwiOiBcIjEwMCVcIiwgXCJwZXJjZW50YWdlXCI6ICR7ZGV0YWlscy5hdmdDcHU3ZCB8fCAwfSB9YFxuXG4gICAgY2FzZSBcIm92ZXJfcHJvdmlzaW9uZWRfYXNnXCI6XG4gICAgICByZXR1cm4gYHsgXCJtZXRyaWNcIjogXCJVdGlsaXphdGlvblwiLCBcImN1cnJlbnRcIjogXCIke2RldGFpbHMuY3VycmVudFV0aWxpemF0aW9uIHx8IDB9JVwiLCBcImNhcGFjaXR5XCI6IFwiMTAwJVwiLCBcInBlcmNlbnRhZ2VcIjogJHtkZXRhaWxzLmN1cnJlbnRVdGlsaXphdGlvbiB8fCAwfSB9LFxuICAgICAgeyBcIm1ldHJpY1wiOiBcIkNhcGFjaXR5XCIsIFwiY3VycmVudFwiOiBcIiR7ZGV0YWlscy5jdXJyZW50Q2FwYWNpdHkgfHwgMH0gaW5zdGFuY2VzXCIsIFwiY2FwYWNpdHlcIjogXCIke2RldGFpbHMubWF4U2l6ZSB8fCAwfSBpbnN0YW5jZXNcIiwgXCJwZXJjZW50YWdlXCI6ICR7TWF0aC5yb3VuZCgoKE51bWJlcihkZXRhaWxzLmN1cnJlbnRDYXBhY2l0eSkgfHwgMCkgLyAoTnVtYmVyKGRldGFpbHMubWF4U2l6ZSkgfHwgMSkpICogMTAwKX0gfWBcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gYHsgXCJtZXRyaWNcIjogXCJVdGlsaXphdGlvblwiLCBcImN1cnJlbnRcIjogXCJsb3dcIiwgXCJjYXBhY2l0eVwiOiBcIk4vQVwiLCBcInBlcmNlbnRhZ2VcIjogMCB9YFxuICB9XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBwcm9tcHQgZm9yIGRhc2hib2FyZC1sZXZlbCBpbnNpZ2h0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVEYXNoYm9hcmRJbnNpZ2h0UHJvbXB0KHBhcmFtczoge1xuICB0b3RhbFJlc291cmNlczogbnVtYmVyXG4gIHRvdGFsRGV0ZWN0aW9uczogbnVtYmVyXG4gIHRvdGFsU2F2aW5nczogbnVtYmVyXG4gIHRvcFNjZW5hcmlvczogeyBuYW1lOiBzdHJpbmc7IGNvdW50OiBudW1iZXI7IHNhdmluZ3M6IG51bWJlciB9W11cbiAgYXV0b1NhZmVDb3VudDogbnVtYmVyXG4gIGFwcHJvdmFsQ291bnQ6IG51bWJlclxufSk6IHN0cmluZyB7XG4gIGNvbnN0IHtcbiAgICB0b3RhbFJlc291cmNlcyxcbiAgICB0b3RhbERldGVjdGlvbnMsXG4gICAgdG90YWxTYXZpbmdzLFxuICAgIHRvcFNjZW5hcmlvcyxcbiAgICBhdXRvU2FmZUNvdW50LFxuICAgIGFwcHJvdmFsQ291bnQsXG4gIH0gPSBwYXJhbXNcblxuICBjb25zdCBzY2VuYXJpb3NMaXN0ID0gdG9wU2NlbmFyaW9zXG4gICAgLnNsaWNlKDAsIDUpXG4gICAgLm1hcCgocykgPT4gYC0gJHtzLm5hbWV9OiAke3MuY291bnR9IHJlc291cmNlcyAoJCR7cy5zYXZpbmdzLnRvRml4ZWQoMCl9L21vKWApXG4gICAgLmpvaW4oXCJcXG5cIilcblxuICByZXR1cm4gYEdlbmVyYXRlIGEgYnJpZWYgMi0zIHNlbnRlbmNlIGluc2lnaHQgYWJvdXQgdGhpcyBjbG91ZCBlbnZpcm9ubWVudCdzIGNvc3Qgb3B0aW1pemF0aW9uIG9wcG9ydHVuaXRpZXM6XG5cbkVOVklST05NRU5UIFNVTU1BUlk6XG4tIFRvdGFsIHJlc291cmNlczogJHt0b3RhbFJlc291cmNlc31cbi0gT3B0aW1pemF0aW9uIG9wcG9ydHVuaXRpZXM6ICR7dG90YWxEZXRlY3Rpb25zfVxuLSBQb3RlbnRpYWwgbW9udGhseSBzYXZpbmdzOiAkJHt0b3RhbFNhdmluZ3MudG9GaXhlZCgyKX1cbi0gQXV0by1zYWZlIGFjdGlvbnMgKGxvdyByaXNrKTogJHthdXRvU2FmZUNvdW50fVxuLSBSZXF1aXJlcyBhcHByb3ZhbCAoaGlnaGVyIHJpc2spOiAke2FwcHJvdmFsQ291bnR9XG5cblRPUCBTQ0VOQVJJT1M6XG4ke3NjZW5hcmlvc0xpc3R9XG5cblByb3ZpZGUgYSBjb25jaXNlLCBhY3Rpb25hYmxlIGluc2lnaHQgaGlnaGxpZ2h0aW5nIHRoZSBiaWdnZXN0IG9wcG9ydHVuaXR5IGFuZCBzdWdnZXN0ZWQgcHJpb3JpdHkuYFxufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgcHJvbXB0IGZvciBidWxrIGFjdGlvbiBzdW1tYXJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUJ1bGtBY3Rpb25TdW1tYXJ5UHJvbXB0KHBhcmFtczoge1xuICBleGVjdXRlZENvdW50OiBudW1iZXJcbiAgc3VjY2Vzc0NvdW50OiBudW1iZXJcbiAgZmFpbGVkQ291bnQ6IG51bWJlclxuICB0b3RhbFNhdmluZ3M6IG51bWJlclxuICBhY3Rpb25zOiB7IHJlc291cmNlTmFtZTogc3RyaW5nOyBhY3Rpb246IHN0cmluZzsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH1bXVxufSk6IHN0cmluZyB7XG4gIGNvbnN0IHsgZXhlY3V0ZWRDb3VudCwgc3VjY2Vzc0NvdW50LCBmYWlsZWRDb3VudCwgdG90YWxTYXZpbmdzLCBhY3Rpb25zIH0gPSBwYXJhbXNcblxuICBjb25zdCBhY3Rpb25zTGlzdCA9IGFjdGlvbnNcbiAgICAuc2xpY2UoMCwgNSlcbiAgICAubWFwKChhKSA9PiBgLSAke2EucmVzb3VyY2VOYW1lfTogJHthLmFjdGlvbn0gLSAke2Euc3VjY2VzcyA/IFwiU3VjY2Vzc1wiIDogXCJGYWlsZWRcIn06ICR7YS5tZXNzYWdlfWApXG4gICAgLmpvaW4oXCJcXG5cIilcblxuICByZXR1cm4gYFN1bW1hcml6ZSB0aGlzIGJhdGNoIG9mIGNvc3Qgb3B0aW1pemF0aW9uIGFjdGlvbnMgaW4gMi0zIHNlbnRlbmNlczpcblxuRVhFQ1VUSU9OIFNVTU1BUlk6XG4tIFRvdGFsIGFjdGlvbnM6ICR7ZXhlY3V0ZWRDb3VudH1cbi0gU3VjY2Vzc2Z1bDogJHtzdWNjZXNzQ291bnR9XG4tIEZhaWxlZDogJHtmYWlsZWRDb3VudH1cbi0gTW9udGhseSBzYXZpbmdzIHJlYWxpemVkOiAkJHt0b3RhbFNhdmluZ3MudG9GaXhlZCgyKX1cblxuQUNUSU9OUzpcbiR7YWN0aW9uc0xpc3R9XG4ke2FjdGlvbnMubGVuZ3RoID4gNSA/IGAuLi4gYW5kICR7YWN0aW9ucy5sZW5ndGggLSA1fSBtb3JlYCA6IFwiXCJ9XG5cblByb3ZpZGUgYSBicmllZiBzdW1tYXJ5IG9mIHdoYXQgd2FzIGFjY29tcGxpc2hlZCBhbmQgYW55IG5vdGFibGUgcmVzdWx0cyBvciBpc3N1ZXMuYFxufVxuXG4vKipcbiAqIEZvcm1hdCBhIGRldGFpbCBrZXkgZm9yIGRpc3BsYXlcbiAqL1xuZnVuY3Rpb24gZm9ybWF0RGV0YWlsS2V5KGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qga2V5TWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIGF2Z0NwdTdkOiBcIkF2ZXJhZ2UgQ1BVICg3ZClcIixcbiAgICBhdmdDb25uZWN0aW9uczdkOiBcIkF2ZXJhZ2UgQ29ubmVjdGlvbnMgKDdkKVwiLFxuICAgIGF2Z1JlcXVlc3RDb3VudDdkOiBcIkF2ZXJhZ2UgUmVxdWVzdHMgKDdkKVwiLFxuICAgIGN1cnJlbnRNZW1vcnlNYjogXCJDdXJyZW50IE1lbW9yeVwiLFxuICAgIHJlY29tbWVuZGVkTWVtb3J5TWI6IFwiUmVjb21tZW5kZWQgTWVtb3J5XCIsXG4gICAgY3VycmVudENhcGFjaXR5OiBcIkN1cnJlbnQgQ2FwYWNpdHlcIixcbiAgICByZWNvbW1lbmRlZENhcGFjaXR5OiBcIlJlY29tbWVuZGVkIENhcGFjaXR5XCIsXG4gICAgaW5zdGFuY2VDbGFzczogXCJJbnN0YW5jZSBDbGFzc1wiLFxuICAgIG5vZGVUeXBlOiBcIk5vZGUgVHlwZVwiLFxuICAgIGxhc3RBY3Rpdml0eTogXCJMYXN0IEFjdGl2aXR5XCIsXG4gICAgZGF5c0lkbGU6IFwiRGF5cyBJZGxlXCIsXG4gIH1cbiAgcmV0dXJuIGtleU1hcFtrZXldIHx8IGtleS5yZXBsYWNlKC8oW0EtWl0pL2csIFwiICQxXCIpLnJlcGxhY2UoL14uLywgKHMpID0+IHMudG9VcHBlckNhc2UoKSlcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBkZXRhaWwgdmFsdWUgZm9yIGRpc3BsYXlcbiAqL1xuZnVuY3Rpb24gZm9ybWF0RGV0YWlsVmFsdWUoa2V5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKTogc3RyaW5nIHtcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBcIk4vQVwiXG5cbiAgaWYgKGtleS5pbmNsdWRlcyhcIkNwdVwiKSB8fCBrZXkuaW5jbHVkZXMoXCJQZXJjZW50XCIpKSB7XG4gICAgcmV0dXJuIGAke3ZhbHVlfSVgXG4gIH1cbiAgaWYgKGtleS5pbmNsdWRlcyhcIk1lbW9yeVwiKSAmJiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICByZXR1cm4gYCR7dmFsdWV9IE1CYFxuICB9XG4gIGlmIChrZXkuaW5jbHVkZXMoXCJDb3N0XCIpIHx8IGtleS5pbmNsdWRlcyhcIlNhdmluZ3NcIikpIHtcbiAgICByZXR1cm4gYCQke051bWJlcih2YWx1ZSkudG9GaXhlZCgyKX1gXG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgIHJldHVybiB2YWx1ZS50b0xvY2FsZVN0cmluZygpXG4gIH1cbiAgcmV0dXJuIFN0cmluZyh2YWx1ZSlcbn1cbiJdLCJuYW1lcyI6WyJTWVNURU1fUFJPTVBUIiwiUkVTT1VSQ0VfVFlQRV9OQU1FUyIsImluc3RhbmNlcyIsInJkc19pbnN0YW5jZXMiLCJjYWNoZV9jbHVzdGVycyIsImxvYWRfYmFsYW5jZXJzIiwibGFtYmRhX2Z1bmN0aW9ucyIsInZvbHVtZXMiLCJzbmFwc2hvdHMiLCJzM19idWNrZXRzIiwiYXV0b3NjYWxpbmdfZ3JvdXBzIiwibG9nX2dyb3VwcyIsImVsYXN0aWNfaXBzIiwiU0NFTkFSSU9fQ09OVEVYVCIsImlkbGVfcmRzIiwiaWRsZV9jYWNoZSIsImlkbGVfbG9hZF9iYWxhbmNlciIsIm92ZXJfcHJvdmlzaW9uZWRfbGFtYmRhIiwib3Zlcl9wcm92aXNpb25lZF9pbnN0YW5jZSIsIm92ZXJfcHJvdmlzaW9uZWRfYXNnIiwib3JwaGFuZWRfZWlwIiwiaWRsZV9jaV9ydW5uZXIiLCJpZGxlX2luc3RhbmNlIiwibG9nX25vX3JldGVudGlvbiIsInVuYXR0YWNoZWRfdm9sdW1lIiwib2xkX3NuYXBzaG90IiwiZ2VuZXJhdGVSZWNvbW1lbmRhdGlvblByb21wdCIsInBhcmFtcyIsInJlc291cmNlTmFtZSIsInJlc291cmNlVHlwZSIsInNjZW5hcmlvSWQiLCJzY2VuYXJpb05hbWUiLCJhY3Rpb24iLCJwb3RlbnRpYWxTYXZpbmdzIiwiY3VycmVudENvc3QiLCJkZXRhaWxzIiwicmVnaW9uIiwiZW52IiwicmVzb3VyY2VUeXBlTmFtZSIsInNjZW5hcmlvQ29udGV4dCIsImRldGFpbHNTdHIiLCJPYmplY3QiLCJlbnRyaWVzIiwiZmlsdGVyIiwidiIsInVuZGVmaW5lZCIsIm1hcCIsImsiLCJmb3JtYXREZXRhaWxLZXkiLCJmb3JtYXREZXRhaWxWYWx1ZSIsImpvaW4iLCJ0b0ZpeGVkIiwiZ2VuZXJhdGVTdHJ1Y3R1cmVkUmVjb21tZW5kYXRpb25Qcm9tcHQiLCJ1dGlsaXphdGlvbk1ldHJpY3MiLCJidWlsZFV0aWxpemF0aW9uTWV0cmljcyIsInN1cHBvcnRzQWx0ZXJuYXRpdmVzIiwiaW5jbHVkZXMiLCJhbHRlcm5hdGl2ZXNTZWN0aW9uIiwiYWx0ZXJuYXRpdmVzSW5zdHJ1Y3Rpb25zIiwiYXZnQ3B1N2QiLCJjdXJyZW50TWVtb3J5UGN0IiwiYXZnTWVtb3J5VXNlZE1iIiwiY3VycmVudE1lbW9yeU1iIiwidXRpbGl6YXRpb25QY3QiLCJhdmdDb25uZWN0aW9uczdkIiwiTWF0aCIsIm1pbiIsIk51bWJlciIsImF2Z1JlcXVlc3RDb3VudDdkIiwiY3VycmVudFV0aWxpemF0aW9uIiwiY3VycmVudENhcGFjaXR5IiwibWF4U2l6ZSIsInJvdW5kIiwiZ2VuZXJhdGVEYXNoYm9hcmRJbnNpZ2h0UHJvbXB0IiwidG90YWxSZXNvdXJjZXMiLCJ0b3RhbERldGVjdGlvbnMiLCJ0b3RhbFNhdmluZ3MiLCJ0b3BTY2VuYXJpb3MiLCJhdXRvU2FmZUNvdW50IiwiYXBwcm92YWxDb3VudCIsInNjZW5hcmlvc0xpc3QiLCJzbGljZSIsInMiLCJuYW1lIiwiY291bnQiLCJzYXZpbmdzIiwiZ2VuZXJhdGVCdWxrQWN0aW9uU3VtbWFyeVByb21wdCIsImV4ZWN1dGVkQ291bnQiLCJzdWNjZXNzQ291bnQiLCJmYWlsZWRDb3VudCIsImFjdGlvbnMiLCJhY3Rpb25zTGlzdCIsImEiLCJzdWNjZXNzIiwibWVzc2FnZSIsImxlbmd0aCIsImtleSIsImtleU1hcCIsInJlY29tbWVuZGVkTWVtb3J5TWIiLCJyZWNvbW1lbmRlZENhcGFjaXR5IiwiaW5zdGFuY2VDbGFzcyIsIm5vZGVUeXBlIiwibGFzdEFjdGl2aXR5IiwiZGF5c0lkbGUiLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJ2YWx1ZSIsInRvTG9jYWxlU3RyaW5nIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai/prompts.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/openai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fexplain%2Froute&page=%2Fapi%2Fai%2Fexplain%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fexplain%2Froute.ts&appDir=%2FUsers%2Fsarjanpatel%2FGithub%20Repositories%2Faws-environment%2Fagentic-ai-platform%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsarjanpatel%2FGithub%20Repositories%2Faws-environment%2Fagentic-ai-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();